"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var T=Object.create;var p=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var I=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var S=(e,i,s,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of v(i))!y.call(e,r)&&r!==s&&p(e,r,{get:()=>i[r],enumerable:!(n=_(i,r))||n.enumerable});return e};var C=(e,i,s)=>(s=e!=null?T(L(e)):{},S(i||!e||!e.__esModule?p(s,"default",{value:e,enumerable:!0}):s,e));var g=I((B,b)=>{b.exports=Vue});var t=C(g());function k(e,i,...s){uni.__log__?uni.__log__(e,i,...s):console[e].apply(console,[...s,i])}var A={"refresh-view":{"":{width:"750rpx",height:80,flexDirection:"row",alignItems:"center",justifyContent:"center"}},list:{"":{flex:1,backgroundColor:"#ebebeb"}},"list-item":{"":{marginLeft:12,marginRight:12,marginTop:12,paddingTop:20,paddingRight:20,paddingBottom:20,paddingLeft:20,backgroundColor:"#ffffff",borderRadius:5}}},x=(e,i)=>{let s=e.__vccOpts||e;for(let[n,r]of i)s[n]=r;return s},D={props:{pid:{type:[Number,String],default:""},parentId:{type:String,default:""}},data(){return{scrollable:!0,dataList:[],refreshing:!1,refreshText:"",refreshFlag:!1}},created(){for(var e=1;e<32;e++)this.dataList.push({id:e,name:e})},methods:{onclick(e){k("log","at pages/list/nvue-swiper-page.nvue:48","onclick")},loadData(){},clear(){this.dataList.length=0},onrefresh(e){this.refreshing=!0,this.refreshText="\u5237\u65B0\u4E2D...",setTimeout(()=>{this.refreshing=!1,this.refreshFlag=!1,this.refreshText="\u5DF2\u5237\u65B0"},2e3)},onpullingdown(e){this.refreshing||(this.pulling=!1,Math.abs(e.pullingDistance)>Math.abs(e.viewHeight)?(this.refreshFlag=!0,this.refreshText="\u91CA\u653E\u7ACB\u5373\u5237\u65B0"):(this.refreshFlag=!1,this.refreshText="\u4E0B\u62C9\u53EF\u4EE5\u5237\u65B0"))}}};function z(e,i,s,n,r,a){return(0,t.openBlock)(),(0,t.createElementBlock)("list",{class:"list",offsetAccuracy:6,bounce:!0,isSwiperList:"true"},[(0,t.createElementVNode)("refresh",{class:"refresh",onRefresh:i[0]||(i[0]=(...l)=>a.onrefresh&&a.onrefresh(...l)),onPullingdown:i[1]||(i[1]=(...l)=>a.onpullingdown&&a.onpullingdown(...l)),display:r.refreshing?"show":"hide"},[(0,t.createElementVNode)("div",{class:"refresh-view"},[(0,t.createElementVNode)("u-text",{class:"loading-text"},(0,t.toDisplayString)(r.refreshText),1)])],40,["display"]),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(r.dataList,(l,c)=>((0,t.openBlock)(),(0,t.createElementBlock)("cell",{key:l.id,onClick:i[2]||(i[2]=(...d)=>a.onclick&&a.onclick(...d))},[(0,t.createElementVNode)("view",{class:"list-item"},[(0,t.createElementVNode)("u-text",null,(0,t.toDisplayString)(l.name),1)])]))),128))])}var F=x(D,[["render",z],["styles",[A]]]),W={page:{"":{flex:1}},"flexible-view":{"":{backgroundColor:"#f823ff"}},tabs:{"":{flex:1,flexDirection:"column",overflow:"hidden",backgroundColor:"#ffffff"}},"tab-bar":{"":{width:"750rpx",height:"84rpx",flexDirection:"row"}},"scroll-view-indicator":{"":{position:"relative",height:2,backgroundColor:"rgba(0,0,0,0)"}},"scroll-view-underline":{"":{position:"absolute",top:0,bottom:0,width:0,backgroundColor:"#007AFF"}},"scroll-view-animation":{"":{transitionDuration:200,transitionProperty:"left"}},"tab-bar-line":{"":{height:"1rpx",backgroundColor:"#cccccc"}},"tab-view":{"":{flex:1}},"uni-tab-item":{"":{flexWrap:"nowrap",paddingLeft:25,paddingRight:25}},"uni-tab-item-title":{"":{color:"#555555",fontSize:"30rpx",height:"80rpx",lineHeight:"80rpx",flexWrap:"nowrap"}},"uni-tab-item-title-active":{"":{color:"#007AFF"}},"swiper-item":{"":{flex:1,flexDirection:"column"}},"swiper-page":{"":{flex:1,flexDirection:"column",position:"absolute",left:0,top:0,right:0,bottom:0}},"@TRANSITION":{"scroll-view-animation":{duration:200,property:"left"}}},E=weex.requireModule("dom"),R=100,M=3,w=1,O={components:{swiperPage:F},data(){return{tabList:[],tabIndex:0,cacheTab:[],scrollInto:"",indicatorLineLeft:0,indicatorLineWidth:0,isTap:!1,showTitleView:!0,pageId:"page",refreshing:!1,refreshText:"",refreshFlag:!1}},onLoad(){for(var e=0;e<6;e++)this.tabList.push({id:"tab"+e,name:"Tab "+(e+1),pageid:e+1})},onReady(){this._lastTabIndex=0,this.swiperWidth=0,this.tabbarWidth=0,this.tabListSize={},this._touchTabIndex=0,this.pageList=this.$refs.page,this.selectorQuery()},methods:{ontabtap(e){let i=e.target.dataset.current||e.currentTarget.dataset.current;this.isTap=!0;var s=this.tabListSize[i];this.updateIndicator(s.left,s.width),this._touchTabIndex=i,this.switchTab(i)},onswiperchange(e){},onswiperscroll(e){if(!this.isTap){var i=e.detail.dx,s=this._lastTabIndex;if(i>w?s++:i<-w&&s--,!(s===this._lastTabIndex||s<0||s>this.pageList.length-1)){this.pageList[s].dataList.length===0&&this.loadTabData(s);var n=Math.abs(this.swiperWidth/i),r=this.tabListSize[this._lastTabIndex],a=this.tabListSize[s],l=r.left+(a.left-r.left)/n,c=r.width+(a.width-r.width)/n;this.updateIndicator(l,c)}}},animationfinish(e){let i=e.detail.current;this._touchTabIndex===i&&(this.isTap=!1),this._lastTabIndex=i,this.switchTab(i),this.updateIndicator(this.tabListSize[i].left,this.tabListSize[i].width)},selectorQuery(){uni.createSelectorQuery().in(this).select("#tab-bar").boundingClientRect().exec(s=>{this.tabbarWidth=s[0].width}),uni.createSelectorQuery().in(this).select("#tab-bar-view").boundingClientRect().exec(s=>{this.swiperWidth=s[0].width});for(var e=uni.createSelectorQuery().in(this),i=0;i<this.tabList.length;i++)e.select("#"+this.tabList[i].id).boundingClientRect();e.exec(s=>{s.forEach(n=>{this.tabListSize[n.dataset.id]=n}),this.updateIndicator(this.tabListSize[this.tabIndex].left,this.tabListSize[this.tabIndex].width),this.switchTab(this.tabIndex)})},updateIndicator(e,i){this.indicatorLineLeft=e,this.indicatorLineWidth=i},switchTab(e){if(this.pageList[e].dataList.length===0&&this.loadTabData(e),this.tabIndex!==e&&(this.pageList[this.tabIndex].dataList.length>R&&this.cacheTab.indexOf(this.tabIndex)<0&&this.cacheTab.push(this.tabIndex),this.tabIndex=e,this.scrollTabTo(e),this.cacheTab.length>M)){let i=this.cacheTab[0];this.clearTabData(i),this.cacheTab.splice(0,1)}},scrollTabTo(e){let i=this.$refs["tabitem"+e][0],s=0;e>0&&(s=this.tabbarWidth/2-this.tabListSize[e].width/2,this.tabListSize[e].right<this.tabbarWidth/2&&(s=this.tabListSize[0].width)),E.scrollToElement(i,{offset:-s})},loadTabData(e){this.pageList[e].loadData()},clearTabData(e){this.pageList[e].clear()},onrefresh(e){this.refreshing=!0,this.refreshText="\u5237\u65B0\u4E2D...",setTimeout(()=>{this.refreshing=!1,this.refreshFlag=!1,this.refreshText="\u5DF2\u5237\u65B0"},2e3)},onpullingdown(e){this.refreshing||(this.pulling=!1,Math.abs(e.pullingDistance)>Math.abs(e.viewHeight)?(this.refreshFlag=!0,this.refreshText="\u91CA\u653E\u7ACB\u5373\u5237\u65B0"):(this.refreshFlag=!1,this.refreshText="\u4E0B\u62C9\u53EF\u4EE5\u5237\u65B0"))}}};function V(e,i,s,n,r,a){let l=(0,t.resolveComponent)("swiper-page"),c=(0,t.resolveComponent)("swiper-item"),d=(0,t.resolveComponent)("swiper");return(0,t.openBlock)(),(0,t.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,t.createElementVNode)("view",{class:"tabs"},[(0,t.createElementVNode)("scroll-view",{ref:"tabbar1",id:"tab-bar",class:"tab-bar",scroll:!1,scrollX:!0,showScrollbar:!1,scrollIntoView:r.scrollInto},[(0,t.createElementVNode)("view",{style:{"flex-direction":"column"}},[(0,t.createElementVNode)("view",{style:{"flex-direction":"row"}},[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(r.tabList,(h,o)=>((0,t.openBlock)(),(0,t.createElementBlock)("view",{class:"uni-tab-item",key:h.id,id:h.id,ref_for:!0,ref:"tabitem"+o,"data-id":o,"data-current":o,onClick:i[0]||(i[0]=(...m)=>a.ontabtap&&a.ontabtap(...m))},[(0,t.createElementVNode)("u-text",{class:(0,t.normalizeClass)(["uni-tab-item-title",r.tabIndex==o?"uni-tab-item-title-active":""])},(0,t.toDisplayString)(h.name),3)],8,["id","data-id","data-current"]))),128))]),(0,t.createElementVNode)("view",{class:"scroll-view-indicator"},[(0,t.createElementVNode)("view",{ref:"underline",class:(0,t.normalizeClass)(["scroll-view-underline",r.isTap?"scroll-view-animation":""]),style:(0,t.normalizeStyle)({left:r.indicatorLineLeft+"px",width:r.indicatorLineWidth+"px"})},null,6)])])],8,["scrollIntoView"]),(0,t.createElementVNode)("view",{class:"tab-bar-line"}),(0,t.createVNode)(d,{class:"tab-view",ref:"swiper1",id:"tab-bar-view",current:r.tabIndex,duration:300,onChange:a.onswiperchange,onTransition:a.onswiperscroll,onAnimationfinish:a.animationfinish,onOnAnimationEnd:a.animationfinish},{default:(0,t.withCtx)(()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(r.tabList,(h,o)=>((0,t.openBlock)(),(0,t.createBlock)(c,{class:"swiper-item",key:o},{default:(0,t.withCtx)(()=>[(0,t.createVNode)(l,{class:"swiper-page",pid:h.pageid,ref_for:!0,ref:"page"},null,8,["pid"])]),_:2},1024))),128))]),_:1},8,["current","onChange","onTransition","onAnimationfinish","onOnAnimationEnd"])])])}var f=x(O,[["render",V],["styles",[W]]]);var u=plus.webview.currentWebview();if(u){let e=parseInt(u.id),i="pages/list/list",s={};try{s=JSON.parse(u.__query__)}catch(r){}f.mpType="page";let n=Vue.createPageApp(f,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:i,__pageQuery:s});n.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...f.styles||[]])),n.mount("#root")}})();
