"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var $n=Object.create;var He=Object.defineProperty,zn=Object.defineProperties,Wn=Object.getOwnPropertyDescriptor,Hn=Object.getOwnPropertyDescriptors,Jn=Object.getOwnPropertyNames,Tt=Object.getOwnPropertySymbols,Vn=Object.getPrototypeOf,At=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable;var It=(n,e,t)=>e in n?He(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||(e={}))At.call(e,t)&&It(n,t,e[t]);if(Tt)for(var t of Tt(e))Qn.call(e,t)&&It(n,t,e[t]);return n},B=(n,e)=>zn(n,Hn(e));var Yn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Gn=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Jn(e))!At.call(n,s)&&s!==t&&He(n,s,{get:()=>e[s],enumerable:!(i=Wn(e,s))||i.enumerable});return n};var Xn=(n,e,t)=>(t=n!=null?$n(Vn(n)):{},Gn(e||!n||!n.__esModule?He(t,"default",{value:n,enumerable:!0}):t,n));var C=(n,e,t)=>new Promise((i,s)=>{var o=l=>{try{c(t.next(l))}catch(r){s(r)}},a=l=>{try{c(t.throw(l))}catch(r){s(r)}},c=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,a);c((t=t.apply(n,e)).next())});var Pt=Yn((ko,xt)=>{xt.exports=Vue});var h=Xn(Pt());var Zn=Object.prototype.hasOwnProperty,ei=(n,e)=>Zn.call(n,e),ti=n=>typeof n=="string",ni="__uniSSR",rn="data",ii="globalData";function si(){return(0,h.getCurrentInstance)()?rn:ii}function oi(n,e=!1){if(!n)throw new Error(`${e?"shallowSsrRef":"ssrRef"}: You must provide a key.`)}var cn=(n,e,t=!1)=>{let i=t?(0,h.shallowRef)(n):(0,h.ref)(n);if(typeof window=="undefined")return i;let s=window[ni];if(!s)return i;let o=si();return oi(e,t),ei(s[o],e)&&(i.value=s[o][e],o===rn&&delete s[o][e]),i},Ct=(n,e)=>cn(n,e),Lt=(n,e)=>cn(n,e,!0);function ue(n,e){return ti(n)?e:n}var ai=n=>n!==null&&typeof n=="object",ri=["{","}"],ot=class{constructor(){this._caches=Object.create(null)}interpolate(e,t,i=ri){if(!t)return[e];let s=this._caches[e];return s||(s=di(e,i),this._caches[e]=s),ui(s,t)}},ci=/^(?:\d)+/,li=/^(?:\w)+/;function di(n,[e,t]){let i=[],s=0,o="";for(;s<n.length;){let a=n[s++];if(a===e){o&&i.push({type:"text",value:o}),o="";let c="";for(a=n[s++];a!==void 0&&a!==t;)c+=a,a=n[s++];let l=a===t,r=ci.test(c)?"list":l&&li.test(c)?"named":"unknown";i.push({value:c,type:r})}else o+=a}return o&&i.push({type:"text",value:o}),i}function ui(n,e){let t=[],i=0,s=Array.isArray(e)?"list":ai(e)?"named":"unknown";if(s==="unknown")return t;for(;i<n.length;){let o=n[i];switch(o.type){case"text":t.push(o.value);break;case"list":t.push(e[parseInt(o.value,10)]);break;case"named":s==="named"&&t.push(e[o.value]);break}i++}return t}var Je="zh-Hans",Ot="zh-Hant",te="en",hi="fr",fi="es",mi=Object.prototype.hasOwnProperty,Et=(n,e)=>mi.call(n,e),gi=new ot;function pi(n,e){return!!e.find(t=>n.indexOf(t)!==-1)}function _i(n,e){return e.find(t=>n.indexOf(t)===0)}function Rt(n,e){if(!n)return;if(n=n.trim().replace(/_/g,"-"),e&&e[n])return n;if(n=n.toLowerCase(),n==="chinese")return Je;if(n.indexOf("zh")===0)return n.indexOf("-hans")>-1?Je:n.indexOf("-hant")>-1||pi(n,["-tw","-hk","-mo","-cht"])?Ot:Je;let t=[te,hi,fi];e&&Object.keys(e).length>0&&(t=Object.keys(e));let i=_i(n,t);if(i)return i}var at=class{constructor({locale:e,fallbackLocale:t,messages:i,watcher:s,formater:o}){this.locale=te,this.fallbackLocale=te,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=o||gi,this.messages=i||{},this.setLocale(e||te),s&&this.watchLocale(s)}setLocale(e){let t=this.locale;this.locale=Rt(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach(i=>{i(this.locale,t)})}getLocale(){return this.locale}watchLocale(e){let t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,i=!0){let s=this.messages[e];s?i?Object.assign(s,t):Object.keys(t).forEach(o=>{Et(s,o)||(s[o]=t[o])}):this.messages[e]=t}f(e,t,i){return this.formater.interpolate(e,t,i).join("")}t(e,t,i){let s=this.message;return typeof t=="string"?(t=Rt(t,this.messages),t&&(s=this.messages[t])):i=t,Et(s,e)?this.formater.interpolate(s[e],i).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}};function yi(n,e){n.$watchLocale?n.$watchLocale(t=>{e.setLocale(t)}):n.$watch(()=>n.$locale,t=>{e.setLocale(t)})}function wi(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():te}function ln(n,e={},t,i){typeof n!="string"&&([n,e]=[e,n]),typeof n!="string"&&(n=wi()),typeof t!="string"&&(t=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||te);let s=new at({locale:n,fallbackLocale:t,messages:e,watcher:i}),o=(a,c)=>{if(typeof getApp!="function")o=function(l,r){return s.t(l,r)};else{let l=!1;o=function(r,g){let u=getApp().$vm;return u&&(u.$locale,l||(l=!0,yi(u,s))),s.t(r,g)}}return o(a,c)};return{i18n:s,f(a,c,l){return s.f(a,c,l)},t(a,c){return o(a,c)},add(a,c,l=!0){return s.add(a,c,l)},watch(a){return s.watchLocale(a)},getLocale(){return s.getLocale()},setLocale(a){return s.setLocale(a)}}}var bi=[{path:"pages/login/login",style:{navigationBarTitleText:"\u767B\u5F55",enablePullDownRefresh:!1}},{path:"pages/home/home",style:{navigationBarTitleText:"\u9996\u9875",enablePullDownRefresh:!1}},{path:"pages/list/list",style:{navigationBarTitleText:"",enablePullDownRefresh:!1,"app-plus":{scrollIndicator:"none",titleNView:{searchInput:{align:"left",borderRadius:"25px"}}}}},{path:"pages/game_common/plone",style:{navigationBarTitleText:"\u5C0F\u7070\u673A",enablePullDownRefresh:!1,transparentTitle:"always"}}],ki={navigationBarTextStyle:"black",navigationBarTitleText:"\u9996\u9875",navigationBarBackgroundColor:"#f4f4f4",backgroundColor:"#f0f0f0","app-plus":{scrollIndicator:"none"}},vi={loginPage:"pages/login/login"},Si={backgroundColor:"#ffffff",list:[{iconPath:"static/home-hide.png",selectedIconPath:"static/home.png",pagePath:"pages/home/home",text:"\u9996\u9875"},{iconPath:"static/list-hide.png",selectedIconPath:"static/list.png",pagePath:"pages/list/list",text:"\u5217\u8868"},{iconPath:"static/login-hide.png",selectedIconPath:"static/login.png",pagePath:"pages/login/login",text:"\u4E2A\u4EBA\u4E2D\u5FC3"}]},dn={pages:bi,globalStyle:ki,uniIdRouter:vi,tabBar:Si};function Ti(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Y(n,e,t){return n(t={path:e,exports:{},require:function(i,s){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(s==null&&t.path)}},t.exports),t.exports}var Ii=Y(function(n,e){var t;n.exports=(t=t||function(i,s){var o=Object.create||function(){function d(){}return function(m){var _;return d.prototype=m,_=new d,d.prototype=null,_}}(),a={},c=a.lib={},l=c.Base={extend:function(d){var m=o(this);return d&&m.mixIn(d),m.hasOwnProperty("init")&&this.init!==m.init||(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var m in d)d.hasOwnProperty(m)&&(this[m]=d[m]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}},r=c.WordArray=l.extend({init:function(d,m){d=this.words=d||[],this.sigBytes=m!=s?m:4*d.length},toString:function(d){return(d||u).stringify(this)},concat:function(d){var m=this.words,_=d.words,w=this.sigBytes,I=d.sigBytes;if(this.clamp(),w%4)for(var A=0;A<I;A++){var x=_[A>>>2]>>>24-A%4*8&255;m[w+A>>>2]|=x<<24-(w+A)%4*8}else for(A=0;A<I;A+=4)m[w+A>>>2]=_[A>>>2];return this.sigBytes+=I,this},clamp:function(){var d=this.words,m=this.sigBytes;d[m>>>2]&=4294967295<<32-m%4*8,d.length=i.ceil(m/4)},clone:function(){var d=l.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var m,_=[],w=function(x){x=x;var L=987654321,E=4294967295;return function(){var j=((L=36969*(65535&L)+(L>>16)&E)<<16)+(x=18e3*(65535&x)+(x>>16)&E)&E;return j/=4294967296,(j+=.5)*(i.random()>.5?1:-1)}},I=0;I<d;I+=4){var A=w(4294967296*(m||i.random()));m=987654071*A(),_.push(4294967296*A()|0)}return new r.init(_,d)}}),g=a.enc={},u=g.Hex={stringify:function(d){for(var m=d.words,_=d.sigBytes,w=[],I=0;I<_;I++){var A=m[I>>>2]>>>24-I%4*8&255;w.push((A>>>4).toString(16)),w.push((15&A).toString(16))}return w.join("")},parse:function(d){for(var m=d.length,_=[],w=0;w<m;w+=2)_[w>>>3]|=parseInt(d.substr(w,2),16)<<24-w%8*4;return new r.init(_,m/2)}},p=g.Latin1={stringify:function(d){for(var m=d.words,_=d.sigBytes,w=[],I=0;I<_;I++){var A=m[I>>>2]>>>24-I%4*8&255;w.push(String.fromCharCode(A))}return w.join("")},parse:function(d){for(var m=d.length,_=[],w=0;w<m;w++)_[w>>>2]|=(255&d.charCodeAt(w))<<24-w%4*8;return new r.init(_,m)}},y=g.Utf8={stringify:function(d){try{return decodeURIComponent(escape(p.stringify(d)))}catch(m){throw new Error("Malformed UTF-8 data")}},parse:function(d){return p.parse(unescape(encodeURIComponent(d)))}},b=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=y.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var m=this._data,_=m.words,w=m.sigBytes,I=this.blockSize,A=w/(4*I),x=(A=d?i.ceil(A):i.max((0|A)-this._minBufferSize,0))*I,L=i.min(4*x,w);if(x){for(var E=0;E<x;E+=I)this._doProcessBlock(_,E);var j=_.splice(0,x);m.sigBytes-=L}return new r.init(j,L)},clone:function(){var d=l.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});c.Hasher=b.extend({cfg:l.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){return d&&this._append(d),this._doFinalize()},blockSize:16,_createHelper:function(d){return function(m,_){return new d.init(_).finalize(m)}},_createHmacHelper:function(d){return function(m,_){return new f.HMAC.init(d,_).finalize(m)}}});var f=a.algo={};return a}(Math),t)}),he=Ii,Ai=(Y(function(n,e){var t;n.exports=(t=he,function(i){var s=t,o=s.lib,a=o.WordArray,c=o.Hasher,l=s.algo,r=[];(function(){for(var f=0;f<64;f++)r[f]=4294967296*i.abs(i.sin(f+1))|0})();var g=l.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(f,d){for(var m=0;m<16;m++){var _=d+m,w=f[_];f[_]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8)}var I=this._hash.words,A=f[d+0],x=f[d+1],L=f[d+2],E=f[d+3],j=f[d+4],Z=f[d+5],V=f[d+6],re=f[d+7],ee=f[d+8],ve=f[d+9],Se=f[d+10],Te=f[d+11],Ie=f[d+12],Ae=f[d+13],xe=f[d+14],Pe=f[d+15],k=I[0],T=I[1],v=I[2],S=I[3];k=u(k,T,v,S,A,7,r[0]),S=u(S,k,T,v,x,12,r[1]),v=u(v,S,k,T,L,17,r[2]),T=u(T,v,S,k,E,22,r[3]),k=u(k,T,v,S,j,7,r[4]),S=u(S,k,T,v,Z,12,r[5]),v=u(v,S,k,T,V,17,r[6]),T=u(T,v,S,k,re,22,r[7]),k=u(k,T,v,S,ee,7,r[8]),S=u(S,k,T,v,ve,12,r[9]),v=u(v,S,k,T,Se,17,r[10]),T=u(T,v,S,k,Te,22,r[11]),k=u(k,T,v,S,Ie,7,r[12]),S=u(S,k,T,v,Ae,12,r[13]),v=u(v,S,k,T,xe,17,r[14]),k=p(k,T=u(T,v,S,k,Pe,22,r[15]),v,S,x,5,r[16]),S=p(S,k,T,v,V,9,r[17]),v=p(v,S,k,T,Te,14,r[18]),T=p(T,v,S,k,A,20,r[19]),k=p(k,T,v,S,Z,5,r[20]),S=p(S,k,T,v,Se,9,r[21]),v=p(v,S,k,T,Pe,14,r[22]),T=p(T,v,S,k,j,20,r[23]),k=p(k,T,v,S,ve,5,r[24]),S=p(S,k,T,v,xe,9,r[25]),v=p(v,S,k,T,E,14,r[26]),T=p(T,v,S,k,ee,20,r[27]),k=p(k,T,v,S,Ae,5,r[28]),S=p(S,k,T,v,L,9,r[29]),v=p(v,S,k,T,re,14,r[30]),k=y(k,T=p(T,v,S,k,Ie,20,r[31]),v,S,Z,4,r[32]),S=y(S,k,T,v,ee,11,r[33]),v=y(v,S,k,T,Te,16,r[34]),T=y(T,v,S,k,xe,23,r[35]),k=y(k,T,v,S,x,4,r[36]),S=y(S,k,T,v,j,11,r[37]),v=y(v,S,k,T,re,16,r[38]),T=y(T,v,S,k,Se,23,r[39]),k=y(k,T,v,S,Ae,4,r[40]),S=y(S,k,T,v,A,11,r[41]),v=y(v,S,k,T,E,16,r[42]),T=y(T,v,S,k,V,23,r[43]),k=y(k,T,v,S,ve,4,r[44]),S=y(S,k,T,v,Ie,11,r[45]),v=y(v,S,k,T,Pe,16,r[46]),k=b(k,T=y(T,v,S,k,L,23,r[47]),v,S,A,6,r[48]),S=b(S,k,T,v,re,10,r[49]),v=b(v,S,k,T,xe,15,r[50]),T=b(T,v,S,k,Z,21,r[51]),k=b(k,T,v,S,Ie,6,r[52]),S=b(S,k,T,v,E,10,r[53]),v=b(v,S,k,T,Se,15,r[54]),T=b(T,v,S,k,x,21,r[55]),k=b(k,T,v,S,ee,6,r[56]),S=b(S,k,T,v,Pe,10,r[57]),v=b(v,S,k,T,V,15,r[58]),T=b(T,v,S,k,Ae,21,r[59]),k=b(k,T,v,S,j,6,r[60]),S=b(S,k,T,v,Te,10,r[61]),v=b(v,S,k,T,L,15,r[62]),T=b(T,v,S,k,ve,21,r[63]),I[0]=I[0]+k|0,I[1]=I[1]+T|0,I[2]=I[2]+v|0,I[3]=I[3]+S|0},_doFinalize:function(){var f=this._data,d=f.words,m=8*this._nDataBytes,_=8*f.sigBytes;d[_>>>5]|=128<<24-_%32;var w=i.floor(m/4294967296),I=m;d[15+(_+64>>>9<<4)]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),d[14+(_+64>>>9<<4)]=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),f.sigBytes=4*(d.length+1),this._process();for(var A=this._hash,x=A.words,L=0;L<4;L++){var E=x[L];x[L]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8)}return A},clone:function(){var f=c.clone.call(this);return f._hash=this._hash.clone(),f}});function u(f,d,m,_,w,I,A){var x=f+(d&m|~d&_)+w+A;return(x<<I|x>>>32-I)+d}function p(f,d,m,_,w,I,A){var x=f+(d&_|m&~_)+w+A;return(x<<I|x>>>32-I)+d}function y(f,d,m,_,w,I,A){var x=f+(d^m^_)+w+A;return(x<<I|x>>>32-I)+d}function b(f,d,m,_,w,I,A){var x=f+(m^(d|~_))+w+A;return(x<<I|x>>>32-I)+d}s.MD5=c._createHelper(g),s.HmacMD5=c._createHmacHelper(g)}(Math),t.MD5)}),Y(function(n,e){var t;n.exports=(t=he,void function(){var i=t,s=i.lib.Base,o=i.enc.Utf8;i.algo.HMAC=s.extend({init:function(a,c){a=this._hasher=new a.init,typeof c=="string"&&(c=o.parse(c));var l=a.blockSize,r=4*l;c.sigBytes>r&&(c=a.finalize(c)),c.clamp();for(var g=this._oKey=c.clone(),u=this._iKey=c.clone(),p=g.words,y=u.words,b=0;b<l;b++)p[b]^=1549556828,y[b]^=909522486;g.sigBytes=u.sigBytes=r,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var c=this._hasher,l=c.finalize(a);return c.reset(),c.finalize(this._oKey.clone().concat(l))}})}())}),Y(function(n,e){n.exports=he.HmacMD5})),xi=Y(function(n,e){n.exports=he.enc.Utf8}),Pi=Y(function(n,e){var t;n.exports=(t=he,function(){var i=t,s=i.lib.WordArray;function o(a,c,l){for(var r=[],g=0,u=0;u<c;u++)if(u%4){var p=l[a.charCodeAt(u-1)]<<u%4*2,y=l[a.charCodeAt(u)]>>>6-u%4*2;r[g>>>2]|=(p|y)<<24-g%4*8,g++}return s.create(r,g)}i.enc.Base64={stringify:function(a){var c=a.words,l=a.sigBytes,r=this._map;a.clamp();for(var g=[],u=0;u<l;u+=3)for(var p=(c[u>>>2]>>>24-u%4*8&255)<<16|(c[u+1>>>2]>>>24-(u+1)%4*8&255)<<8|c[u+2>>>2]>>>24-(u+2)%4*8&255,y=0;y<4&&u+.75*y<l;y++)g.push(r.charAt(p>>>6*(3-y)&63));var b=r.charAt(64);if(b)for(;g.length%4;)g.push(b);return g.join("")},parse:function(a){var c=a.length,l=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var g=0;g<l.length;g++)r[l.charCodeAt(g)]=g}var u=l.charAt(64);if(u){var p=a.indexOf(u);p!==-1&&(c=p)}return o(a,c,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64)}),Dt="FUNCTION",Ci="OBJECT",Li="CLIENT_DB",Ut="pending",Oi="fullfilled",Nt="rejected";function yt(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function un(n){return yt(n)==="object"}function hn(n){return typeof n=="function"}function Ei(n){return function(){try{return n.apply(n,arguments)}catch(e){console.error(e)}}}var Mt="REJECTED",fn="NOT_PENDING",Ue=class{constructor({createPromise:e,retryRule:t=Mt}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case Mt:return this.status===Nt;case fn:return this.status!==Ut}}exec(){return this.needRetry?(this.status=Ut,this.promise=this.createPromise().then(e=>(this.status=Oi,Promise.resolve(e)),e=>(this.status=Nt,Promise.reject(e))),this.promise):this.promise}};function wt(n){return n&&typeof n=="string"?JSON.parse(n):n}var Ri=!1,Di="app",Ui=wt([]),mn=Di;wt("");var Ni=wt('[{"provider":"aliyun","spaceName":"yx-plane","spaceId":"mp-2a0e68a1-4e42-4285-b25e-1462368efa7f","clientSecret":"Qi8TgmxnDRXiSeLDWh1xTQ==","endpoint":"https://api.next.bspapp.com"}]')||[],Mi="";try{Mi="__UNI__81D3AC3"}catch(n){}var De={};function ne(n,e={}){var t,i;return t=De,i=n,Object.prototype.hasOwnProperty.call(t,i)||(De[n]=e),De[n]}De=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};var gn=["invoke","success","fail","complete"],$=ne("_globalUniCloudInterceptor");function pn(n,e){$[n]||($[n]={}),un(e)&&Object.keys(e).forEach(t=>{gn.indexOf(t)>-1&&function(i,s,o){let a=$[i][s];a||(a=$[i][s]=[]),a.indexOf(o)===-1&&hn(o)&&a.push(o)}(n,t,e[t])})}function Fi(n,e){$[n]||($[n]={}),un(e)?Object.keys(e).forEach(t=>{gn.indexOf(t)>-1&&function(i,s,o){let a=$[i][s];if(!a)return;let c=a.indexOf(o);c>-1&&a.splice(c,1)}(n,t,e[t])}):delete $[n]}function U(n,e){return n&&n.length!==0?n.reduce((t,i)=>t.then(()=>i(e)),Promise.resolve()):Promise.resolve()}function N(n,e){return $[n]&&$[n][e]||[]}function qi(n){pn("callObject",n)}var Ve=ne("_globalUniCloudListener"),z="response",ie="needLogin",Ne="refreshToken",Ft="clientdb",Ce="cloudfunction",qt="cloudobject";function we(n){return Ve[n]||(Ve[n]=[]),Ve[n]}function Qe(n,e){let t=we(n);t.includes(e)||t.push(e)}function Ye(n,e){let t=we(n),i=t.indexOf(e);i!==-1&&t.splice(i,1)}function F(n,e){let t=we(n);for(let i=0;i<t.length;i++)(0,t[i])(e)}var Ge,Xe=!1;function _n(){return Ge||(Ge=new Promise(n=>{Xe&&n(),function e(){if(typeof getCurrentPages=="function"){let t=getCurrentPages();t&&t[0]&&(Xe=!0,n())}Xe||setTimeout(()=>{e()},30)}()}),Ge)}function yn(n){let e={};for(let t in n){let i=n[t];hn(i)&&(e[t]=Ei(i))}return e}var P=class extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}},q={request:n=>uni.request(n),uploadFile:n=>uni.uploadFile(n),setStorageSync:(n,e)=>uni.setStorageSync(n,e),getStorageSync:n=>uni.getStorageSync(n),removeStorageSync:n=>uni.removeStorageSync(n),clearStorageSync:()=>uni.clearStorageSync()};function wn(n){return n&&wn(n.__v_raw)||n}function ze(){return{token:q.getStorageSync("uni_id_token")||q.getStorageSync("uniIdToken"),tokenExpired:q.getStorageSync("uni_id_token_expired")}}function bn({token:n,tokenExpired:e}={}){n&&q.setStorageSync("uni_id_token",n),e&&q.setStorageSync("uni_id_token_expired",e)}var Ze,Le;function kn(){return Ze||(Ze=uni.getSystemInfoSync()),Ze}function ji(){let n,e;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;let{scene:t,channel:i}=uni.getLaunchOptionsSync();n=i,e=t}}catch(t){}return{channel:n,scene:e}}function vn(){let n=uni.getLocale&&uni.getLocale()||"en";if(Le)return B(O({},Le),{locale:n,LOCALE:n});let e=kn(),{deviceId:t,osName:i,uniPlatform:s,appId:o}=e,a=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"];for(let c=0;c<a.length;c++)delete e[a[c]];return Le=O(O({PLATFORM:s,OS:i,APPID:o,DEVICEID:t},ji()),e),B(O({},Le),{locale:n,LOCALE:n})}var le={sign:function(n,e){let t="";return Object.keys(n).sort().forEach(function(i){n[i]&&(t=t+"&"+i+"="+n[i])}),t=t.slice(1),Ai(t,e).toString()},wrappedRequest:function(n,e){return new Promise((t,i)=>{e(Object.assign(n,{complete(s){s||(s={});let o=s.data&&s.data.header&&s.data.header["x-serverless-request-id"]||s.header&&s.header["request-id"];if(!s.statusCode||s.statusCode>=400)return i(new P({code:"SYS_ERR",message:s.errMsg||"request:fail",requestId:o}));let a=s.data;if(a.error)return i(new P({code:a.error.code,message:a.error.message,requestId:o}));a.result=a.data,a.requestId=o,delete a.data,t(a)}}))})},toBase64:function(n){return Pi.stringify(xi.parse(n))}},jt={"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},{t:Bi}=ln({"zh-Hans":{"uniCloud.init.paramRequired":"\u7F3A\u5C11\u53C2\u6570\uFF1A{param}","uniCloud.uploadFile.fileError":"filePath\u5E94\u4E3AFile\u5BF9\u8C61"},"zh-Hant":{"uniCloud.init.paramRequired":"\u7F3A\u5C11\u53C2\u6570\uFF1A{param}","uniCloud.uploadFile.fileError":"filePath\u5E94\u4E3AFile\u5BF9\u8C61"},en:jt,fr:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},es:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},ja:jt},"zh-Hans"),Sn=class{constructor(n){["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(n,e))throw new Error(Bi("uniCloud.init.paramRequired",{param:e}))}),this.config=Object.assign({},{endpoint:n.spaceId.indexOf("mp-")===0?"https://api.next.bspapp.com":"https://api.bspapp.com"},n),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=q,this._getAccessTokenPromiseHub=new Ue({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then(e=>{if(!e.result||!e.result.accessToken)throw new P({code:"AUTH_FAILED",message:"\u83B7\u53D6accessToken\u5931\u8D25"});this.setAccessToken(e.result.accessToken)}),retryRule:fn})}get hasAccessToken(){return!!this.accessToken}setAccessToken(n){this.accessToken=n}requestWrapped(n){return le.wrappedRequest(n,this.adapter.request)}requestAuth(n){return this.requestWrapped(n)}request(n,e){return Promise.resolve().then(()=>this.hasAccessToken?e?this.requestWrapped(n):this.requestWrapped(n).catch(t=>new Promise((i,s)=>{!t||t.code!=="GATEWAY_INVALID_TOKEN"&&t.code!=="InvalidParameter.InvalidToken"?s(t):i()}).then(()=>this.getAccessToken()).then(()=>{let i=this.rebuildRequest(n);return this.request(i,!0)})):this.getAccessToken().then(()=>{let t=this.rebuildRequest(n);return this.request(t,!0)}))}rebuildRequest(n){let e=Object.assign({},n);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=le.sign(e.data,this.config.clientSecret),e}setupRequest(n,e){let t=Object.assign({},n,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return e!=="auth"&&(t.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=le.sign(t,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:i}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}authorize(){return C(this,null,function*(){yield this.getAccessToken()})}callFunction(n){let e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:n.name,functionArgs:n.data||{}})};return this.request(this.setupRequest(e))}getOSSUploadOptionsFromPath(n){let e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(n)};return this.request(this.setupRequest(e))}uploadFileToOSS({url:n,formData:e,name:t,filePath:i,fileType:s,onUploadProgress:o}){return new Promise((a,c)=>{let l=this.adapter.uploadFile({url:n,formData:e,name:t,filePath:i,fileType:s,header:{"X-OSS-server-side-encrpytion":"AES256"},success(r){r&&r.statusCode<400?a(r):c(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(r){c(new P({code:r.code||"UPLOAD_FAILED",message:r.message||r.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof o=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(r=>{o({loaded:r.totalBytesSent,total:r.totalBytesExpectedToSend})})})}reportOSSUpload(n){let e={method:"serverless.file.resource.report",params:JSON.stringify(n)};return this.request(this.setupRequest(e))}uploadFile(a){return C(this,arguments,function*({filePath:n,cloudPath:e,fileType:t="image",cloudPathAsRealPath:i=!1,onUploadProgress:s,config:o}){if(yt(e)!=="string")throw new P({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new P({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new P({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let c=o&&o.envType||this.config.envType;if(i&&(e[0]!=="/"&&(e="/"+e),e.indexOf("\\")>-1))throw new P({code:"INVALID_PARAM",message:"\u4F7F\u7528cloudPath\u4F5C\u4E3A\u8DEF\u5F84\u65F6\uFF0CcloudPath\u4E0D\u53EF\u5305\u542B\u201C\\\u201D"});let l=(yield this.getOSSUploadOptionsFromPath({env:c,filename:i?e.split("/").pop():e,fileId:i?e:void 0})).result,r="https://"+l.cdnDomain+"/"+l.ossPath,{securityToken:g,accessKeyId:u,signature:p,host:y,ossPath:b,id:f,policy:d,ossCallbackUrl:m}=l,_={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:u,Signature:p,host:y,id:f,key:b,policy:d,success_action_status:200};if(g&&(_["x-oss-security-token"]=g),m){let I=JSON.stringify({callbackUrl:m,callbackBody:JSON.stringify({fileId:f,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});_.callback=le.toBase64(I)}let w={url:"https://"+l.host,formData:_,fileName:"file",name:"file",filePath:n,fileType:t};if(yield this.uploadFileToOSS(Object.assign({},w,{onUploadProgress:s})),m)return{success:!0,filePath:n,fileID:r};if((yield this.reportOSSUpload({id:f})).success)return{success:!0,filePath:n,fileID:r};throw new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"})})}getTempFileURL({fileList:n}={}){return new Promise((e,t)=>{Array.isArray(n)&&n.length!==0||t(new P({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"})),e({fileList:n.map(i=>({fileID:i,tempFileURL:i}))})})}getFileInfo(){return C(this,arguments,function*({fileList:n}={}){if(!Array.isArray(n)||n.length===0)throw new P({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let e={method:"serverless.file.resource.info",params:JSON.stringify({id:n.map(t=>t.split("?")[0]).join(",")})};return{fileList:(yield this.request(this.setupRequest(e))).result}})}},Ki={init(n){let e=new Sn(n),t={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return t},e.customAuth=e.auth,e}},$i=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:",Bt;(function(n){n.local="local",n.none="none",n.session="session"})(Bt||(Bt={}));var zi=function(){},be=()=>{let n;if(!Promise){n=()=>{},n.promise={};let t=()=>{throw new P({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(n.promise,"then",{get:t}),Object.defineProperty(n.promise,"catch",{get:t}),n}let e=new Promise((t,i)=>{n=(s,o)=>s?i(s):t(o)});return n.promise=e,n};function Wi(n){return n===void 0}function Hi(n){return Object.prototype.toString.call(n)==="[object Null]"}var Kt;function Ji(n){let e=(t=n,Object.prototype.toString.call(t)==="[object Array]"?n:[n]);var t;for(let i of e){let{isMatch:s,genAdapter:o,runtime:a}=i;if(s())return{adapter:o(),runtime:a}}}(function(n){n.WEB="web",n.WX_MP="wx_mp"})(Kt||(Kt={}));var D={adapter:null,runtime:void 0},Vi=["anonymousUuidKey"],fe=class extends zi{constructor(){super(),D.adapter.root.tcbObject||(D.adapter.root.tcbObject={})}setItem(e,t){D.adapter.root.tcbObject[e]=t}getItem(e){return D.adapter.root.tcbObject[e]}removeItem(e){delete D.adapter.root.tcbObject[e]}clear(){delete D.adapter.root.tcbObject}};function $t(n,e){switch(n){case"local":return e.localStorage||new fe;case"none":return new fe;default:return e.sessionStorage||new fe}}var Me=class{constructor(e){if(!this._storage){this._persistence=D.adapter.primaryStorage||e.persistence,this._storage=$t(this._persistence,D.adapter);let t=`access_token_${e.env}`,i=`access_token_expire_${e.env}`,s=`refresh_token_${e.env}`,o=`anonymous_uuid_${e.env}`,a=`login_type_${e.env}`,c=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:s,anonymousUuidKey:o,loginTypeKey:a,userInfoKey:c}}}updatePersistence(e){if(e===this._persistence)return;let t=this._persistence==="local";this._persistence=e;let i=$t(e,D.adapter);for(let s in this.keys){let o=this.keys[s];if(t&&Vi.includes(s))continue;let a=this._storage.getItem(o);Wi(a)||Hi(a)||(i.setItem(o,a),this._storage.removeItem(o))}this._storage=i}setStore(e,t,i){if(!this._storage)return;let s={version:i||"localCachev1",content:t},o=JSON.stringify(s);try{this._storage.setItem(e,o)}catch(a){throw a}}getStore(e,t){try{if(!this._storage)return}catch(s){return""}t=t||"localCachev1";let i=this._storage.getItem(e);return i&&i.indexOf(t)>=0?JSON.parse(i).content:""}removeStore(e){this._storage.removeItem(e)}},Tn={},In={};function ke(n){return Tn[n]}var Fe=class{constructor(e,t){this.data=t||null,this.name=e}},rt=class extends Fe{constructor(e,t){super("error",{error:e,data:t}),this.error=e}},bt=new class{constructor(){this._listeners={}}on(n,e){return function(t,i,s){s[t]=s[t]||[],s[t].push(i)}(n,e,this._listeners),this}off(n,e){return function(t,i,s){if(s&&s[t]){let o=s[t].indexOf(i);o!==-1&&s[t].splice(o,1)}}(n,e,this._listeners),this}fire(n,e){if(n instanceof rt)return console.error(n.error),this;let t=typeof n=="string"?new Fe(n,e||{}):n,i=t.name;if(this._listens(i)){t.target=this;let s=this._listeners[i]?[...this._listeners[i]]:[];for(let o of s)o.call(this,t)}return this}_listens(n){return this._listeners[n]&&this._listeners[n].length>0}};function H(n,e){bt.on(n,e)}function M(n,e={}){bt.fire(n,e)}function Qi(n,e){bt.off(n,e)}var se="loginStateChanged",An="loginStateExpire",J="loginTypeChanged",ct="anonymousConverted",xn="refreshAccessToken",R;(function(n){n.ANONYMOUS="ANONYMOUS",n.WECHAT="WECHAT",n.WECHAT_PUBLIC="WECHAT-PUBLIC",n.WECHAT_OPEN="WECHAT-OPEN",n.CUSTOM="CUSTOM",n.EMAIL="EMAIL",n.USERNAME="USERNAME",n.NULL="NULL"})(R||(R={}));var zt=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],Yi={"X-SDK-Version":"1.3.5"};function et(n,e,t){let i=n[e];n[e]=function(s){let o={},a={};t.forEach(l=>{let{data:r,headers:g}=l.call(n,s);Object.assign(o,r),Object.assign(a,g)});let c=s.data;return c&&(()=>{var l;if(l=c,Object.prototype.toString.call(l)!=="[object FormData]")s.data=O(O({},c),o);else for(let r in o)c.append(r,o[r])})(),s.headers=O(O({},s.headers||{}),a),i.call(n,s)}}function tt(){let n=Math.random().toString(16).slice(2);return{data:{seqId:n},headers:B(O({},Yi),{"x-seqid":n})}}var lt=class{constructor(e={}){var t;this.config=e,this._reqClass=new D.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`\u8BF7\u6C42\u5728${this.config.timeout/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`,restrictedMethods:["post"]}),this._cache=ke(this.config.env),this._localCache=(t=this.config.env,In[t]),et(this._reqClass,"post",[tt]),et(this._reqClass,"upload",[tt]),et(this._reqClass,"download",[tt])}post(e){return C(this,null,function*(){return yield this._reqClass.post(e)})}upload(e){return C(this,null,function*(){return yield this._reqClass.upload(e)})}download(e){return C(this,null,function*(){return yield this._reqClass.download(e)})}refreshAccessToken(){return C(this,null,function*(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=yield this._refreshAccessTokenPromise}catch(i){t=i}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e})}_refreshAccessToken(){return C(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i,loginTypeKey:s,anonymousUuidKey:o}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let a=this._cache.getStore(i);if(!a)throw new P({message:"\u672A\u767B\u5F55CloudBase"});let c={refresh_token:a},l=yield this.request("auth.fetchAccessTokenWithRefreshToken",c);if(l.data.code){let{code:r}=l.data;if(r==="SIGN_PARAM_INVALID"||r==="REFRESH_TOKEN_EXPIRED"||r==="INVALID_REFRESH_TOKEN"){if(this._cache.getStore(s)===R.ANONYMOUS&&r==="INVALID_REFRESH_TOKEN"){let g=this._cache.getStore(o),u=this._cache.getStore(i),p=yield this.send("auth.signInAnonymously",{anonymous_uuid:g,refresh_token:u});return this.setRefreshToken(p.refresh_token),this._refreshAccessToken()}M(An),this._cache.removeStore(i)}throw new P({code:l.data.code,message:`\u5237\u65B0access token\u5931\u8D25\uFF1A${l.data.code}`})}if(l.data.access_token)return M(xn),this._cache.setStore(e,l.data.access_token),this._cache.setStore(t,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire};l.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,l.data.refresh_token),this._refreshAccessToken())})}getAccessToken(){return C(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i}=this._cache.keys;if(!this._cache.getStore(i))throw new P({message:"refresh token\u4E0D\u5B58\u5728\uFF0C\u767B\u5F55\u72B6\u6001\u5F02\u5E38"});let s=this._cache.getStore(e),o=this._cache.getStore(t),a=!0;return this._shouldRefreshAccessTokenHook&&!(yield this._shouldRefreshAccessTokenHook(s,o))&&(a=!1),(!s||!o||o<Date.now())&&a?this.refreshAccessToken():{accessToken:s,accessTokenExpire:o}})}request(e,t,i){return C(this,null,function*(){let s=`x-tcb-trace_${this.config.env}`,o="application/x-www-form-urlencoded",a=O({action:e,env:this.config.env,dataVersion:"2019-08-16"},t);if(zt.indexOf(e)===-1){let{refreshTokenKey:m}=this._cache.keys;this._cache.getStore(m)&&(a.access_token=(yield this.getAccessToken()).accessToken)}let c;if(e==="storage.uploadFile"){c=new FormData;for(let m in c)c.hasOwnProperty(m)&&c[m]!==void 0&&c.append(m,a[m]);o="multipart/form-data"}else{o="application/json",c={};for(let m in a)a[m]!==void 0&&(c[m]=a[m])}let l={headers:{"content-type":o}};i&&i.onUploadProgress&&(l.onUploadProgress=i.onUploadProgress);let r=this._localCache.getStore(s);r&&(l.headers["X-TCB-Trace"]=r);let{parse:g,inQuery:u,search:p}=t,y={env:this.config.env};g&&(y.parse=!0),u&&(y=O(O({},u),y));let b=function(m,_,w={}){let I=/\?/.test(_),A="";for(let x in w)A===""?!I&&(_+="?"):A+="&",A+=`${x}=${encodeURIComponent(w[x])}`;return/^http(s)?\:\/\//.test(_+=A)?_:`${m}${_}`}($i,"//tcb-api.tencentcloudapi.com/web",y);p&&(b+=p);let f=yield this.post(O({url:b,data:c},l)),d=f.header&&f.header["x-tcb-trace"];if(d&&this._localCache.setStore(s,d),Number(f.status)!==200&&Number(f.statusCode)!==200||!f.data)throw new P({code:"NETWORK_ERROR",message:"network request error"});return f})}send(i){return C(this,arguments,function*(e,t={}){let s=yield this.request(e,t,{onUploadProgress:t.onUploadProgress});if(s.data.code==="ACCESS_TOKEN_EXPIRED"&&zt.indexOf(e)===-1){yield this.refreshAccessToken();let o=yield this.request(e,t,{onUploadProgress:t.onUploadProgress});if(o.data.code)throw new P({code:o.data.code,message:o.data.message});return o.data}if(s.data.code)throw new P({code:s.data.code,message:s.data.message});return s.data})}setRefreshToken(e){let{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(s,e)}},Pn={};function W(n){return Pn[n]}var oe=class{constructor(e){this.config=e,this._cache=ke(e.env),this._request=W(e.env)}setRefreshToken(e){let{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(s,e)}setAccessToken(e,t){let{accessTokenKey:i,accessTokenExpireKey:s}=this._cache.keys;this._cache.setStore(i,e),this._cache.setStore(s,t)}refreshUserInfo(){return C(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setLocalUserInfo(e){let{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}},dt=class{constructor(e){if(!e)throw new P({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=ke(this._envId),this._request=W(this._envId),this.setUserInfo()}linkWithTicket(e){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}getLinkedUidList(){return C(this,null,function*(){let{data:e}=yield this._request.send("auth.getLinkedUidList",{}),t=!1,{users:i}=e;return i.forEach(s=>{s.wxOpenId&&s.wxPublicId&&(t=!0)}),{users:i,hasPrimaryUid:t}})}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}update(e){return C(this,null,function*(){let{nickName:t,gender:i,avatarUrl:s,province:o,country:a,city:c}=e,{data:l}=yield this._request.send("auth.updateUserInfo",{nickName:t,gender:i,avatarUrl:s,province:o,country:a,city:c});this.setLocalUserInfo(l)})}refresh(){return C(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setUserInfo(){let{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach(i=>{this[i]=t[i]}),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){let{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}},X=class{constructor(e){if(!e)throw new P({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=ke(e);let{refreshTokenKey:t,accessTokenKey:i,accessTokenExpireKey:s}=this._cache.keys,o=this._cache.getStore(t),a=this._cache.getStore(i),c=this._cache.getStore(s);this.credential={refreshToken:o,accessToken:a,accessTokenExpire:c},this.user=new dt(e)}get isAnonymousAuth(){return this.loginType===R.ANONYMOUS}get isCustomAuth(){return this.loginType===R.CUSTOM}get isWeixinAuth(){return this.loginType===R.WECHAT||this.loginType===R.WECHAT_OPEN||this.loginType===R.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},me=class extends oe{signIn(){return C(this,null,function*(){this._cache.updatePersistence("local");let{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,i=this._cache.getStore(e)||void 0,s=this._cache.getStore(t)||void 0,o=yield this._request.send("auth.signInAnonymously",{anonymous_uuid:i,refresh_token:s});if(o.uuid&&o.refresh_token){this._setAnonymousUUID(o.uuid),this.setRefreshToken(o.refresh_token),yield this._request.refreshAccessToken(),M(se),M(J,{env:this.config.env,loginType:R.ANONYMOUS,persistence:"local"});let a=new X(this.config.env);return yield a.user.refresh(),a}throw new P({message:"\u533F\u540D\u767B\u5F55\u5931\u8D25"})})}linkAndRetrieveDataWithTicket(e){return C(this,null,function*(){let{anonymousUuidKey:t,refreshTokenKey:i}=this._cache.keys,s=this._cache.getStore(t),o=this._cache.getStore(i),a=yield this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:s,refresh_token:o,ticket:e});if(a.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(a.refresh_token),yield this._request.refreshAccessToken(),M(ct,{env:this.config.env}),M(J,{loginType:R.CUSTOM,persistence:"local"}),{credential:{refreshToken:a.refresh_token}};throw new P({message:"\u533F\u540D\u8F6C\u5316\u5931\u8D25"})})}_setAnonymousUUID(e){let{anonymousUuidKey:t,loginTypeKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(i,R.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}},qe=class extends oe{signIn(e){return C(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"ticket must be a string"});let{refreshTokenKey:t}=this._cache.keys,i=yield this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(i.refresh_token)return this.setRefreshToken(i.refresh_token),yield this._request.refreshAccessToken(),M(se),M(J,{env:this.config.env,loginType:R.CUSTOM,persistence:this.config.persistence}),yield this.refreshUserInfo(),new X(this.config.env);throw new P({message:"\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25"})})}},je=class extends oe{signIn(e,t){return C(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"email must be a string"});let{refreshTokenKey:i}=this._cache.keys,s=yield this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:o,access_token:a,access_token_expire:c}=s;if(o)return this.setRefreshToken(o),a&&c?this.setAccessToken(a,c):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),M(se),M(J,{env:this.config.env,loginType:R.EMAIL,persistence:this.config.persistence}),new X(this.config.env);throw s.code?new P({code:s.code,message:`\u90AE\u7BB1\u767B\u5F55\u5931\u8D25: ${s.message}`}):new P({message:"\u90AE\u7BB1\u767B\u5F55\u5931\u8D25"})})}activate(e){return C(this,null,function*(){return this._request.send("auth.activateEndUserMail",{token:e})})}resetPasswordWithToken(e,t){return C(this,null,function*(){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})})}},Be=class extends oe{signIn(e,t){return C(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"username must be a string"});typeof t!="string"&&(t="",console.warn("password is empty"));let{refreshTokenKey:i}=this._cache.keys,s=yield this._request.send("auth.signIn",{loginType:R.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:o,access_token_expire:a,access_token:c}=s;if(o)return this.setRefreshToken(o),c&&a?this.setAccessToken(c,a):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),M(se),M(J,{env:this.config.env,loginType:R.USERNAME,persistence:this.config.persistence}),new X(this.config.env);throw s.code?new P({code:s.code,message:`\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25: ${s.message}`}):new P({message:"\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25"})})}},ut=class{constructor(e){this.config=e,this._cache=ke(e.env),this._request=W(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),H(J,this._onLoginTypeChanged)}get currentUser(){let e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new me(this.config)}customAuthProvider(){return new qe(this.config)}emailAuthProvider(){return new je(this.config)}usernameAuthProvider(){return new Be(this.config)}signInAnonymously(){return C(this,null,function*(){return new me(this.config).signIn()})}signInWithEmailAndPassword(e,t){return C(this,null,function*(){return new je(this.config).signIn(e,t)})}signInWithUsernameAndPassword(e,t){return new Be(this.config).signIn(e,t)}linkAndRetrieveDataWithTicket(e){return C(this,null,function*(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new me(this.config)),H(ct,this._onAnonymousConverted),yield this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)})}signOut(){return C(this,null,function*(){if(this.loginType===R.ANONYMOUS)throw new P({message:"\u533F\u540D\u7528\u6237\u4E0D\u652F\u6301\u767B\u51FA\u64CD\u4F5C"});let{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:i}=this._cache.keys,s=this._cache.getStore(e);if(!s)return;let o=yield this._request.send("auth.logout",{refresh_token:s});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(i),M(se),M(J,{env:this.config.env,loginType:R.NULL,persistence:this.config.persistence}),o})}signUpWithEmailAndPassword(e,t){return C(this,null,function*(){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})})}sendPasswordResetEmail(e){return C(this,null,function*(){return this._request.send("auth.sendPasswordResetEmail",{email:e})})}onLoginStateChanged(e){H(se,()=>{let i=this.hasLoginState();e.call(this,i)});let t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){H(An,e.bind(this))}onAccessTokenRefreshed(e){H(xn,e.bind(this))}onAnonymousConverted(e){H(ct,e.bind(this))}onLoginTypeChanged(e){H(J,()=>{let t=this.hasLoginState();e.call(this,t)})}getAccessToken(){return C(this,null,function*(){return{accessToken:(yield this._request.getAccessToken()).accessToken,env:this.config.env}})}hasLoginState(){let{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new X(this.config.env):null}isUsernameRegistered(e){return C(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"username must be a string"});let{data:t}=yield this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered})}getLoginState(){return Promise.resolve(this.hasLoginState())}signInWithTicket(e){return C(this,null,function*(){return new qe(this.config).signIn(e)})}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then(e=>e.code?e:B(O({},e.data),{requestId:e.seqId}))}getAuthHeader(){let{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,i=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+i}}_onAnonymousConverted(e){let{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){let{loginType:t,persistence:i,env:s}=e.data;s===this.config.env&&(this._cache.updatePersistence(i),this._cache.setStore(this._cache.keys.loginTypeKey,t))}},Gi=function(n,e){e=e||be();let t=W(this.config.env),{cloudPath:i,filePath:s,onUploadProgress:o,fileType:a="image"}=n;return t.send("storage.getUploadMetadata",{path:i}).then(c=>{let{data:{url:l,authorization:r,token:g,fileId:u,cosFileId:p},requestId:y}=c,b={key:i,signature:r,"x-cos-meta-fileid":p,success_action_status:"201","x-cos-security-token":g};t.upload({url:l,data:b,file:s,name:i,fileType:a,onUploadProgress:o}).then(f=>{f.statusCode===201?e(null,{fileID:u,requestId:y}):e(new P({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${f.data}`}))}).catch(f=>{e(f)})}).catch(c=>{e(c)}),e.promise},Xi=function(n,e){e=e||be();let t=W(this.config.env),{cloudPath:i}=n;return t.send("storage.getUploadMetadata",{path:i}).then(s=>{e(null,s)}).catch(s=>{e(s)}),e.promise},Zi=function({fileList:n},e){if(e=e||be(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"};for(let i of n)if(!i||typeof i!="string")return{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"};let t={fileid_list:n};return W(this.config.env).send("storage.batchDeleteFile",t).then(i=>{i.code?e(null,i):e(null,{fileList:i.data.delete_list,requestId:i.requestId})}).catch(i=>{e(i)}),e.promise},Cn=function({fileList:n},e){e=e||be(),n&&Array.isArray(n)||e(null,{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"});let t=[];for(let s of n)typeof s=="object"?(s.hasOwnProperty("fileID")&&s.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5305\u542BfileID\u548CmaxAge\u7684\u5BF9\u8C61"}),t.push({fileid:s.fileID,max_age:s.maxAge})):typeof s=="string"?t.push({fileid:s}):e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5B57\u7B26\u4E32"});let i={file_list:t};return W(this.config.env).send("storage.batchGetDownloadUrl",i).then(s=>{s.code?e(null,s):e(null,{fileList:s.data.download_list,requestId:s.requestId})}).catch(s=>{e(s)}),e.promise},es=function(t,i){return C(this,arguments,function*({fileID:n},e){let s=(yield Cn.call(this,{fileList:[{fileID:n,maxAge:600}]})).fileList[0];if(s.code!=="SUCCESS")return e?e(s):new Promise(c=>{c(s)});let o=W(this.config.env),a=s.download_url;if(a=encodeURI(a),!e)return o.download({url:a});e(yield o.download({url:a}))})},ts=function({name:n,data:e,query:t,parse:i,search:s},o){let a=o||be(),c;try{c=e?JSON.stringify(e):""}catch(r){return Promise.reject(r)}if(!n)return Promise.reject(new P({code:"PARAM_ERROR",message:"\u51FD\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));let l={inQuery:t,parse:i,search:s,function_name:n,request_data:c};return W(this.config.env).send("functions.invokeFunction",l).then(r=>{if(r.code)a(null,r);else{let g=r.data.response_data;if(i)a(null,{result:g,requestId:r.requestId});else try{g=JSON.parse(r.data.response_data),a(null,{result:g,requestId:r.requestId})}catch(u){a(new P({message:"response data must be json"}))}}return a.promise}).catch(r=>{a(r)}),a.promise},Wt={timeout:15e3,persistence:"session"},Ht={},ge=class{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(D.adapter||(this.requestClient=new D.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`\u8BF7\u6C42\u5728${(e.timeout||5e3)/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`})),this.config=O(O({},Wt),e),!0){case this.config.timeout>6e5:console.warn("timeout\u5927\u4E8E\u53EF\u914D\u7F6E\u4E0A\u9650[10\u5206\u949F]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0A\u9650\u6570\u503C"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout\u5C0F\u4E8E\u53EF\u914D\u7F6E\u4E0B\u9650[100ms]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0B\u9650\u6570\u503C"),this.config.timeout=100}return new ge(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;let t=e||D.adapter.primaryStorage||Wt.persistence;var i;return t!==this.config.persistence&&(this.config.persistence=t),function(s){let{env:o}=s;Tn[o]=new Me(s),In[o]=new Me(B(O({},s),{persistence:"local"}))}(this.config),i=this.config,Pn[i.env]=new lt(i),this.authObj=new ut(this.config),this.authObj}on(e,t){return H.apply(this,[e,t])}off(e,t){return Qi.apply(this,[e,t])}callFunction(e,t){return ts.apply(this,[e,t])}deleteFile(e,t){return Zi.apply(this,[e,t])}getTempFileURL(e,t){return Cn.apply(this,[e,t])}downloadFile(e,t){return es.apply(this,[e,t])}uploadFile(e,t){return Gi.apply(this,[e,t])}getUploadMetadata(e,t){return Xi.apply(this,[e,t])}registerExtension(e){Ht[e.name]=e}invokeExtension(e,t){return C(this,null,function*(){let i=Ht[e];if(!i)throw new P({message:`\u6269\u5C55${e} \u5FC5\u987B\u5148\u6CE8\u518C`});return yield i.invoke(t,this)})}useAdapters(e){let{adapter:t,runtime:i}=Ji(e)||{};t&&(D.adapter=t),i&&(D.runtime=i)}},Ln=new ge;function Jt(n,e,t){t===void 0&&(t={});var i=/\?/.test(e),s="";for(var o in t)s===""?!i&&(e+="?"):s+="&",s+=o+"="+encodeURIComponent(t[o]);return/^http(s)?:\/\//.test(e+=s)?e:""+n+e}var ht=class{post(e){let{url:t,data:i,headers:s}=e;return new Promise((o,a)=>{q.request({url:Jt("https:",t),data:i,method:"POST",header:s,success(c){o(c)},fail(c){a(c)}})})}upload(e){return new Promise((t,i)=>{let{url:s,file:o,data:a,headers:c,fileType:l}=e,r=q.uploadFile({url:Jt("https:",s),name:"file",formData:Object.assign({},a),filePath:o,fileType:l,header:c,success(g){let u={statusCode:g.statusCode,data:g.data||{}};g.statusCode===200&&a.success_action_status&&(u.statusCode=parseInt(a.success_action_status,10)),t(u)},fail(g){i(new Error(g.errMsg||"uploadFile:fail"))}});typeof e.onUploadProgress=="function"&&r&&typeof r.onProgressUpdate=="function"&&r.onProgressUpdate(g=>{e.onUploadProgress({loaded:g.totalBytesSent,total:g.totalBytesExpectedToSend})})})}},ns={setItem(n,e){q.setStorageSync(n,e)},getItem:n=>q.getStorageSync(n),removeItem(n){q.removeStorageSync(n)},clear(){q.clearStorageSync()}},is={genAdapter:function(){return{root:{},reqClass:ht,localStorage:ns,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Ln.useAdapters(is);var kt=Ln,ss=kt.init;kt.init=function(n){n.env=n.spaceId;let e=ss.call(this,n);e.config.provider="tencent",e.config.spaceId=n.spaceId;let t=e.auth;return e.auth=function(i){let s=t.call(this,i);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach(o=>{var a;s[o]=(a=s[o],function(c){c=c||{};let{success:l,fail:r,complete:g}=yn(c);if(!(l||r||g))return a.call(this,c);a.call(this,c).then(u=>{l&&l(u),g&&g(u)},u=>{r&&r(u),g&&g(u)})}).bind(s)}),s},e.customAuth=e.auth,e};var Vt=kt,os=class extends Sn{getAccessToken(){return new Promise((n,e)=>{let t="Anonymous_Access_token";this.setAccessToken(t),n(t)})}setupRequest(n,e){let t=Object.assign({},n,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};e!=="auth"&&(t.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=le.sign(t,this.config.clientSecret);let s=vn();i["x-client-info"]=encodeURIComponent(JSON.stringify(s));let{token:o}=ze();return i["x-client-token"]=o,{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:JSON.parse(JSON.stringify(i))}}uploadFileToOSS({url:n,formData:e,name:t,filePath:i,fileType:s,onUploadProgress:o}){return new Promise((a,c)=>{let l=this.adapter.uploadFile({url:n,formData:e,name:t,filePath:i,fileType:s,success(r){r&&r.statusCode<400?a(r):c(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(r){c(new P({code:r.code||"UPLOAD_FAILED",message:r.message||r.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof o=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(r=>{o({loaded:r.totalBytesSent,total:r.totalBytesExpectedToSend})})})}uploadFile({filePath:n,cloudPath:e,fileType:t="image",onUploadProgress:i}){if(!e)throw new P({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});let s;return this.getOSSUploadOptionsFromPath({cloudPath:e}).then(o=>{let{url:a,formData:c,name:l}=o.result;s=o.result.fileUrl;let r={url:a,formData:c,name:l,filePath:n,fileType:t};return this.uploadFileToOSS(Object.assign({},r,{onUploadProgress:i}))}).then(()=>this.reportOSSUpload({cloudPath:e})).then(o=>new Promise((a,c)=>{o.success?a({success:!0,filePath:n,fileID:s}):c(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}))}deleteFile({fileList:n}){let e={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:n})};return this.request(this.setupRequest(e)).then(t=>{if(t.success)return t.result;throw new P({code:"DELETE_FILE_FAILED",message:"\u5220\u9664\u6587\u4EF6\u5931\u8D25"})})}getTempFileURL({fileList:n}={}){if(!Array.isArray(n)||n.length===0)throw new P({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let e={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:n})};return this.request(this.setupRequest(e)).then(t=>{if(t.success)return{fileList:t.result.fileList.map(i=>({fileID:i.fileID,tempFileURL:i.tempFileURL}))};throw new P({code:"GET_TEMP_FILE_URL_FAILED",message:"\u83B7\u53D6\u4E34\u65F6\u6587\u4EF6\u94FE\u63A5\u5931\u8D25"})})}},as={init(n){let e=new os(n),t={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return t},e.customAuth=e.auth,e}};function rs({data:n}){let e;e=vn();let t=JSON.parse(JSON.stringify(n||{}));if(Object.assign(t,{clientInfo:e}),!t.uniIdToken){let{token:i}=ze();i&&(t.uniIdToken=i)}return t}var cs=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"\uFF0C\u4E91\u51FD\u6570[{functionName}]\u5728\u4E91\u7AEF\u4E0D\u5B58\u5728\uFF0C\u8BF7\u68C0\u67E5\u6B64\u4E91\u51FD\u6570\u540D\u79F0\u662F\u5426\u6B63\u786E\u4EE5\u53CA\u8BE5\u4E91\u51FD\u6570\u662F\u5426\u5DF2\u4E0A\u4F20\u5230\u670D\u52A1\u7A7A\u95F4",mode:"append"}],On=/[\\^$.*+?()[\]{}|]/g,ls=RegExp(On.source);function Qt(n,e,t){return n.replace(new RegExp((i=e)&&ls.test(i)?i.replace(On,"\\$&"):i,"g"),t);var i}var ds="request",us="response",hs="both",fs={code:2e4,message:"System error"},ms={code:20101,message:"Invalid client"};function En(n){let{errSubject:e,subject:t,errCode:i,errMsg:s,code:o,message:a,cause:c}=n||{};return new P({subject:e||t||"uni-secure-network",code:i||o||fs.code,message:s||a,cause:c})}var ft;function Yt({secretType:n}={}){return n===ds||n===us||n===hs}function Gt({name:n,data:e={}}={}){return n==="DCloud-clientDB"&&e.redirectTo==="encryption"&&e.action==="getAppClientKey"}function gs({provider:n,spaceId:e,functionName:t}={}){let{appId:i,uniPlatform:s,osName:o}=kn(),a=s;s==="app"&&(a=o);let c=function({provider:u,spaceId:p}={}){let y=Ui;if(!y)return{};u=function(f){return f==="tencent"?"tcb":f}(u);let b=y.find(f=>f.provider===u&&f.spaceId===p);return b&&b.config}({provider:n,spaceId:e});if(!c||!c.accessControl||!c.accessControl.enable)return!1;let l=c.accessControl.function||{},r=Object.keys(l);if(r.length===0)return!0;let g=function(u,p){let y,b,f;for(let d=0;d<u.length;d++){let m=u[d];m!==p?m!=="*"?m.split(",").map(_=>_.trim()).indexOf(p)>-1&&(b=m):f=m:y=m}return y||b||f}(r,t);if(!g)return!1;if((l[g]||[]).find((u={})=>u.appId===i&&(u.platform||"").toLowerCase()===a.toLowerCase()))return!0;throw console.error(`\u6B64\u5E94\u7528[appId: ${i}, platform: ${a}]\u4E0D\u5728\u4E91\u7AEF\u914D\u7F6E\u7684\u5141\u8BB8\u8BBF\u95EE\u7684\u5E94\u7528\u5217\u8868\u5185\uFF0C\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),En(ms)}function Xt({functionName:n,result:e,logPvd:t}){}function ps(n){let e=n.callFunction,t=function(i){let s=i.name;i.data=rs.call(n,{data:i.data});let o={aliyun:"aliyun",tencent:"tcb",tcb:"tcb"}[this.config.provider],a=Yt(i),c=Gt(i),l=a||c;return e.call(this,i).then(r=>(r.errCode=0,!l&&Xt.call(this,{functionName:s,result:r,logPvd:o}),Promise.resolve(r)),r=>(!l&&Xt.call(this,{functionName:s,result:r,logPvd:o}),r&&r.message&&(r.message=function({message:g="",extraInfo:u={},formatter:p=[]}={}){for(let y=0;y<p.length;y++){let{rule:b,content:f,mode:d}=p[y],m=g.match(b);if(!m)continue;let _=f;for(let w=1;w<m.length;w++)_=Qt(_,`{$${w}}`,m[w]);for(let w in u)_=Qt(_,`{${w}}`,u[w]);return d==="replace"?_:g+_}return g}({message:`[${i.name}]: ${r.message}`,formatter:cs,extraInfo:{functionName:s}})),Promise.reject(r)))};n.callFunction=function(i){let{provider:s,spaceId:o}=n.config,a=i.name,c,l;return i.data=i.data||{},c=t,c=c.bind(n),Gt(i)?l=t.call(n,i):Yt(i)?l=new ft({secretType:i.secretType,uniCloudIns:n}).wrapEncryptDataCallFunction(t.bind(n))(i):gs({provider:s,spaceId:o,functionName:a})?l=new ft({secretType:i.secretType,uniCloudIns:n}).wrapVerifyClientCallFunction(t.bind(n))(i):l=c(i),Object.defineProperty(l,"result",{get:()=>(console.warn("\u5F53\u524D\u8FD4\u56DE\u7ED3\u679C\u4E3APromise\u7C7B\u578B\uFF0C\u4E0D\u53EF\u76F4\u63A5\u8BBF\u95EE\u5176result\u5C5E\u6027\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),l}}ft=class{constructor(){throw En({message:`Platform ${mn} is not enabled, please check whether secure network module is enabled in your manifest.json`})}};var Rn=Symbol("CLIENT_DB_INTERNAL");function Ke(n,e){return n.then="DoNotReturnProxyWithAFunctionNamedThen",n._internalType=Rn,n.inspect=null,n.__v_raw=void 0,new Proxy(n,{get(t,i,s){if(i==="_uniClient")return null;if(typeof i=="symbol")return t[i];if(i in t||typeof i!="string"){let o=t[i];return typeof o=="function"?o.bind(t):o}return e.get(t,i,s)}})}function Zt(n){return{on:(e,t)=>{n[e]=n[e]||[],n[e].indexOf(t)>-1||n[e].push(t)},off:(e,t)=>{n[e]=n[e]||[];let i=n[e].indexOf(t);i!==-1&&n[e].splice(i,1)}}}var _s=["db.Geo","db.command","command.aggregate"];function Dn(n,e){return _s.indexOf(`${n}.${e}`)>-1}function G(n){switch(yt(n=wn(n))){case"array":return n.map(e=>G(e));case"object":return n._internalType===Rn||Object.keys(n).forEach(e=>{n[e]=G(n[e])}),n;case"regexp":return{$regexp:{source:n.source,flags:n.flags}};case"date":return{$date:n.toISOString()};default:return n}}function ce(n){return n&&n.content&&n.content.$method}var mt=class{constructor(e,t,i){this.content=e,this.prevStage=t||null,this.udb=null,this._database=i}toJSON(){let e=this,t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map(i=>({$method:i.$method,$param:G(i.$param)}))}}toString(){return JSON.stringify(this.toJSON())}getAction(){let e=this.toJSON().$db.find(t=>t.$method==="action");return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter(e=>e.$method!=="action")}}get isAggregate(){let e=this;for(;e;){let t=ce(e),i=ce(e.prevStage);if(t==="aggregate"&&i==="collection"||t==="pipeline")return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if(ce(e)==="command")return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){let t=ce(e),i=ce(e.prevStage);if(t==="aggregate"&&i==="command")return!0;e=e.prevStage}return!1}getNextStageFn(e){let t=this;return function(){return pe({$method:e,$param:G(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL\u7981\u6B62\u4F7F\u7528set\u65B9\u6CD5")}}_send(e,t){let i=this.getAction(),s=this.getCommand();return s.$db.push({$method:e,$param:G(t)}),this._database._callCloudFunction({action:i,command:s})}};function pe(n,e,t){return Ke(new mt(n,e,t),{get(i,s){let o="db";return i&&i.content&&(o=i.content.$method),Dn(o,s)?pe({$method:s},i,t):function(){return pe({$method:s,$param:G(Array.from(arguments))},i,t)}}})}function nt({path:n,method:e}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...n.map(t=>({$method:t})),{$method:e,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function en(n,e={}){return Ke(new n(e),{get:(t,i)=>Dn("db",i)?pe({$method:i},null,t):function(){return pe({$method:i,$param:G(Array.from(arguments))},null,t)}})}var $e=class extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=ne("_globalUniCloudDatabaseCallback")),t||(this.auth=Zt(this._authCallBacks)),this._isJQL=t,Object.assign(this,Zt(this._dbCallBacks)),this.env=Ke({},{get:(i,s)=>({$env:s})}),this.Geo=Ke({},{get:(i,s)=>nt({path:["Geo"],method:s})}),this.serverDate=nt({path:[],method:"serverDate"}),this.RegExp=nt({path:[],method:"RegExp"})}getCloudEnv(e){if(typeof e!="string"||!e.trim())throw new Error("getCloudEnv\u53C2\u6570\u9519\u8BEF");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){let i=this._dbCallBacks;i[e]&&i[e].forEach(s=>{s(...t)})}_callbackAuth(e,t){let i=this._authCallBacks;i[e]&&i[e].forEach(s=>{s(...t)})}multiSend(){let e=Array.from(arguments),t=e.map(i=>{let s=i.getAction(),o=i.getCommand();if(o.$db[o.$db.length-1].$method!=="getTemp")throw new Error("multiSend\u53EA\u652F\u6301\u5B50\u547D\u4EE4\u5185\u4F7F\u7528getTemp");return{action:s,command:o}});return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:i,queryList:s}){function o(u,p){if(i&&s)for(let y=0;y<s.length;y++){let b=s[y];b.udb&&typeof b.udb.setResult=="function"&&(p?b.udb.setResult(p):b.udb.setResult(u.result.dataList[y]))}}let a=this,c=this._isJQL?"databaseForJQL":"database";function l(u){return a._callback("error",[u]),U(N(c,"fail"),u).then(()=>U(N(c,"complete"),u)).then(()=>(o(null,u),F(z,{type:Ft,content:u}),Promise.reject(u)))}let r=U(N(c,"invoke")),g=this._uniClient;return r.then(()=>g.callFunction({name:"DCloud-clientDB",type:Li,data:{action:e,command:t,multiCommand:i}})).then(u=>{let{code:p,message:y,token:b,tokenExpired:f,systemInfo:d=[]}=u.result;if(d)for(let _=0;_<d.length;_++){let{level:w,message:I,detail:A}=d[_],x=console[w==="warn"?"error":w]||console.log,L="[System Info]"+I;A&&(L=`${L}
\u8BE6\u7EC6\u4FE1\u606F\uFF1A${A}`),x(L)}if(p)return l(new P({code:p,message:y,requestId:u.requestId}));u.result.errCode=u.result.errCode||u.result.code,u.result.errMsg=u.result.errMsg||u.result.message,b&&f&&(bn({token:b,tokenExpired:f}),this._callbackAuth("refreshToken",[{token:b,tokenExpired:f}]),this._callback("refreshToken",[{token:b,tokenExpired:f}]),F(Ne,{token:b,tokenExpired:f}));let m=[{prop:"affectedDocs",tips:"affectedDocs\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528inserted/deleted/updated/data.length\u66FF\u4EE3"},{prop:"code",tips:"code\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errCode\u66FF\u4EE3"},{prop:"message",tips:"message\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errMsg\u66FF\u4EE3"}];for(let _=0;_<m.length;_++){let{prop:w,tips:I}=m[_];if(w in u.result){let A=u.result[w];Object.defineProperty(u.result,w,{get:()=>(console.warn(I),A)})}}return function(_){return U(N(c,"success"),_).then(()=>U(N(c,"complete"),_)).then(()=>{o(_,null);let w=a._parseResult(_);return F(z,{type:Ft,content:w}),Promise.resolve(w)})}(u)},u=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(u.message)&&console.warn("clientDB\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5728web\u63A7\u5236\u53F0\u4FDD\u5B58\u4E00\u6B21schema\u4EE5\u5F00\u542FclientDB"),l(new P({code:u.code||"SYSTEM_ERROR",message:u.message,requestId:u.requestId}))))}},Q="token\u65E0\u6548\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",Un="token\u8FC7\u671F\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",ys={TOKEN_INVALID_TOKEN_EXPIRED:Un,TOKEN_INVALID_INVALID_CLIENTID:Q,TOKEN_INVALID:Q,TOKEN_INVALID_WRONG_TOKEN:Q,TOKEN_INVALID_ANONYMOUS_USER:Q},gt={"uni-id-token-expired":Un,"uni-id-check-token-failed":Q,"uni-id-token-not-exist":Q,"uni-id-check-device-feature-failed":Q};function tn(n,e){let t="";return t=n?`${n}/${e}`:e,t.replace(/^\//,"")}function nn(n=[],e=""){let t=[],i=[];return n.forEach(s=>{s.needLogin===!0?t.push(tn(e,s.path)):s.needLogin===!1&&i.push(tn(e,s.path))}),{needLoginPage:t,notNeedLoginPage:i}}function _e(n){return n.split("?")[0].replace(/^\//,"")}function vt(){return function(n){let e=n&&n.$page&&n.$page.fullPath||"";return e&&(e.charAt(0)!=="/"&&(e="/"+e),e)}(function(){let n=getCurrentPages();return n[n.length-1]}())}function Nn(){return _e(vt())}function ws(n="",e={}){if(!n||!(e&&e.list&&e.list.length))return!1;let t=e.list,i=_e(n);return t.some(s=>s.pagePath===i)}var bs=!!dn.uniIdRouter,{loginPage:ye,routerNeedLogin:ks,resToLogin:vs,needLoginPage:Mn,notNeedLoginPage:Ss,loginPageInTabBar:Ts}=function({pages:n=[],subPackages:e=[],uniIdRouter:t={},tabBar:i={}}=dn){let{loginPage:s,needLogin:o=[],resToLogin:a=!0}=t,{needLoginPage:c,notNeedLoginPage:l}=nn(n),{needLoginPage:r,notNeedLoginPage:g}=function(u=[]){let p=[],y=[];return u.forEach(b=>{let{root:f,pages:d=[]}=b,{needLoginPage:m,notNeedLoginPage:_}=nn(d,f);p.push(...m),y.push(..._)}),{needLoginPage:p,notNeedLoginPage:y}}(e);return{loginPage:s,routerNeedLogin:o,resToLogin:a,needLoginPage:[...c,...r],notNeedLoginPage:[...l,...g],loginPageInTabBar:ws(s,i)}}();if(Mn.indexOf(ye)>-1)throw new Error(`Login page [${ye}] should not be "needLogin", please check your pages.json`);function Fn(n){let e=Nn();if(n.charAt(0)==="/")return n;let[t,i]=n.split("?"),s=t.replace(/^\//,"").split("/"),o=e.split("/");o.pop();for(let a=0;a<s.length;a++){let c=s[a];c===".."?o.pop():c!=="."&&o.push(c)}return o[0]===""&&o.shift(),"/"+o.join("/")+(i?"?"+i:"")}function Is(n){let e=_e(Fn(n));return!(Ss.indexOf(e)>-1)&&(Mn.indexOf(e)>-1||ks.some(t=>function(i,s){return new RegExp(s).test(i)}(n,t)))}function qn({redirect:n}){let e=_e(n),t=_e(ye);return Nn()!==t&&e!==t}function pt({api:n,redirect:e}={}){if(!e||!qn({redirect:e}))return;let t=function(s,o){return s.charAt(0)!=="/"&&(s="/"+s),o?s.indexOf("?")>-1?s+`&uniIdRedirectUrl=${encodeURIComponent(o)}`:s+`?uniIdRedirectUrl=${encodeURIComponent(o)}`:s}(ye,e);Ts?n!=="navigateTo"&&n!=="redirectTo"||(n="switchTab"):n==="switchTab"&&(n="navigateTo");let i={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout(()=>{i[n]({url:t})})}function sn({url:n}={}){let e={abortLoginPageJump:!1,autoToLoginPage:!1},t=function(){let{token:i,tokenExpired:s}=ze(),o;if(i){if(s<Date.now()){let a="uni-id-token-expired";o={errCode:a,errMsg:gt[a]}}}else{let a="uni-id-check-token-failed";o={errCode:a,errMsg:gt[a]}}return o}();if(Is(n)&&t){if(t.uniIdRedirectUrl=n,we(ie).length>0)return setTimeout(()=>{F(ie,t)},0),e.abortLoginPageJump=!0,e;e.autoToLoginPage=!0}return e}function As(){(function(){let e=vt(),{abortLoginPageJump:t,autoToLoginPage:i}=sn({url:e});t||i&&pt({api:"redirectTo",redirect:e})})();let n=["navigateTo","redirectTo","reLaunch","switchTab"];for(let e=0;e<n.length;e++){let t=n[e];uni.addInterceptor(t,{invoke(i){let{abortLoginPageJump:s,autoToLoginPage:o}=sn({url:i.url});return s?i:o?(pt({api:t,redirect:Fn(i.url)}),!1):i}})}}function xs(){this.onResponse(n=>{let{type:e,content:t}=n,i=!1;switch(e){case"cloudobject":i=function(s){if(typeof s!="object")return!1;let{errCode:o}=s||{};return o in gt}(t);break;case"clientdb":i=function(s){if(typeof s!="object")return!1;let{errCode:o}=s||{};return o in ys}(t)}i&&function(s={}){let o=we(ie);_n().then(()=>{let a=vt();if(a&&qn({redirect:a}))return o.length>0?F(ie,Object.assign({uniIdRedirectUrl:a},s)):void(ye&&pt({api:"navigateTo",redirect:a}))})}(t)})}function Ps(n){(function(e){e.onResponse=function(t){Qe(z,t)},e.offResponse=function(t){Ye(z,t)}})(n),function(e){e.onNeedLogin=function(t){Qe(ie,t)},e.offNeedLogin=function(t){Ye(ie,t)},bs&&(ne("_globalUniCloudStatus").needLoginInit||(ne("_globalUniCloudStatus").needLoginInit=!0,_n().then(()=>{As.call(e)}),vs&&xs.call(e)))}(n),function(e){e.onRefreshToken=function(t){Qe(Ne,t)},e.offRefreshToken=function(t){Ye(Ne,t)}}(n)}var jn,Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cs=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function Ls(){let n=ze().token||"",e=n.split(".");if(!n||e.length!==3)return{uid:null,role:[],permission:[],tokenExpired:0};let t;try{t=JSON.parse((i=e[1],decodeURIComponent(jn(i).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(s){throw new Error("\u83B7\u53D6\u5F53\u524D\u7528\u6237\u4FE1\u606F\u51FA\u9519\uFF0C\u8BE6\u7EC6\u9519\u8BEF\u4FE1\u606F\u4E3A\uFF1A"+s.message)}var i;return t.tokenExpired=1e3*t.exp,delete t.exp,delete t.iat,t}jn=typeof atob!="function"?function(n){if(n=String(n).replace(/[\t\n\f\r ]+/g,""),!Cs.test(n))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var e;n+="==".slice(2-(3&n.length));for(var t,i,s="",o=0;o<n.length;)e=Oe.indexOf(n.charAt(o++))<<18|Oe.indexOf(n.charAt(o++))<<12|(t=Oe.indexOf(n.charAt(o++)))<<6|(i=Oe.indexOf(n.charAt(o++))),s+=t===64?String.fromCharCode(e>>16&255):i===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return s}:atob;var Os=Y(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});let t="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function s(a,c){return a.tempFiles.forEach((l,r)=>{l.name||(l.name=l.path.substring(l.path.lastIndexOf("/")+1)),c&&(l.fileType=c),l.cloudPath=Date.now()+"_"+r+l.name.substring(l.name.lastIndexOf("."))}),a.tempFilePaths||(a.tempFilePaths=a.tempFiles.map(l=>l.path)),a}function o(a,c,{onChooseFile:l,onUploadProgress:r}){return c.then(g=>{if(l){let u=l(g);if(u!==void 0)return Promise.resolve(u).then(p=>p===void 0?g:p)}return g}).then(g=>g===!1?{errMsg:t,tempFilePaths:[],tempFiles:[]}:function(u,p,y=5,b){(p=Object.assign({},p)).errMsg=t;let f=p.tempFiles,d=f.length,m=0;return new Promise(_=>{for(;m<y;)w();function w(){let I=m++;if(I>=d)return void(!f.find(x=>!x.url&&!x.errMsg)&&_(p));let A=f[I];u.uploadFile({filePath:A.path,cloudPath:A.cloudPath,fileType:A.fileType,onUploadProgress(x){x.index=I,x.tempFile=A,x.tempFilePath=A.path,b&&b(x)}}).then(x=>{A.url=x.fileID,I<d&&w()}).catch(x=>{A.errMsg=x.errMsg||x.message,I<d&&w()})}})}(a,g,5,r))}e.initChooseAndUploadFile=function(a){return function(c={type:"all"}){return c.type==="image"?o(a,function(l){let{count:r,sizeType:g,sourceType:u=["album","camera"],extension:p}=l;return new Promise((y,b)=>{uni.chooseImage({count:r,sizeType:g,sourceType:u,extension:p,success(f){y(s(f,"image"))},fail(f){b({errMsg:f.errMsg.replace("chooseImage:fail",i)})}})})}(c),c):c.type==="video"?o(a,function(l){let{camera:r,compressed:g,maxDuration:u,sourceType:p=["album","camera"],extension:y}=l;return new Promise((b,f)=>{uni.chooseVideo({camera:r,compressed:g,maxDuration:u,sourceType:p,extension:y,success(d){let{tempFilePath:m,duration:_,size:w,height:I,width:A}=d;b(s({errMsg:"chooseVideo:ok",tempFilePaths:[m],tempFiles:[{name:d.tempFile&&d.tempFile.name||"",path:m,size:w,type:d.tempFile&&d.tempFile.type||"",width:A,height:I,duration:_,fileType:"video",cloudPath:""}]},"video"))},fail(d){f({errMsg:d.errMsg.replace("chooseVideo:fail",i)})}})})}(c),c):o(a,function(l){let{count:r,extension:g}=l;return new Promise((u,p)=>{let y=uni.chooseFile;if(typeof wx!="undefined"&&typeof wx.chooseMessageFile=="function"&&(y=wx.chooseMessageFile),typeof y!="function")return p({errMsg:i+" \u8BF7\u6307\u5B9A type \u7C7B\u578B\uFF0C\u8BE5\u5E73\u53F0\u4EC5\u652F\u6301\u9009\u62E9 image \u6216 video\u3002"});y({type:"all",count:r,extension:g,success(b){u(s(b))},fail(b){p({errMsg:b.errMsg.replace("chooseFile:fail",i)})}})})}(c),c)}}}),Es=Ti(Os),Rs="manual";function Bn(n){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{}}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach(t=>{e.push(this[t])}),e},(e,t)=>{if(this.loadtime===Rs)return;let i=!1,s=[];for(let o=2;o<e.length;o++)e[o]!==t[o]&&(s.push(e[o]),i=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(i,s)})},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:i}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomGet().then(s=>{this.mixinDatacomLoading=!1;let{data:o,count:a}=s.result;this.getcount&&(this.mixinDatacomPage.count=a),this.mixinDatacomHasMore=o.length<this.pageSize;let c=e?o.length?o[0]:void 0:o;this.mixinDatacomResData=c,t&&t(c)}).catch(s=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=s,i&&i(s)}))},mixinDatacomGet(e={}){let t=n.database(this.spaceInfo),i=e.action||this.action;i&&(t=t.action(i));let s=e.collection||this.collection;t=Array.isArray(s)?t.collection(...s):t.collection(s);let o=e.where||this.where;o&&Object.keys(o).length&&(t=t.where(o));let a=e.field||this.field;a&&(t=t.field(a));let c=e.foreignKey||this.foreignKey;c&&(t=t.foreignKey(c));let l=e.groupby||this.groupby;l&&(t=t.groupBy(l));let r=e.groupField||this.groupField;r&&(t=t.groupField(r)),(e.distinct!==void 0?e.distinct:this.distinct)===!0&&(t=t.distinct());let g=e.orderby||this.orderby;g&&(t=t.orderBy(g));let u=e.pageCurrent!==void 0?e.pageCurrent:this.mixinDatacomPage.current,p=e.pageSize!==void 0?e.pageSize:this.mixinDatacomPage.size,y=e.getcount!==void 0?e.getcount:this.getcount,b=e.gettree!==void 0?e.gettree:this.gettree,f=e.gettreepath!==void 0?e.gettreepath:this.gettreepath,d={getCount:y},m={limitLevel:e.limitlevel!==void 0?e.limitlevel:this.limitlevel,startWith:e.startwith!==void 0?e.startwith:this.startwith};return b&&(d.getTree=m),f&&(d.getTreePath=m),t=t.skip(p*(u-1)).limit(p).get(d),t}}}}function Ds(n){return function(e,t={}){t=function(l,r={}){return l.customUI=r.customUI||l.customUI,l.parseSystemError=r.parseSystemError||l.parseSystemError,Object.assign(l.loadingOptions,r.loadingOptions),Object.assign(l.errorOptions,r.errorOptions),typeof r.secretMethods=="object"&&(l.secretMethods=r.secretMethods),l}({customUI:!1,loadingOptions:{title:"\u52A0\u8F7D\u4E2D...",mask:!0},errorOptions:{type:"modal",retry:!1}},t);let{customUI:i,loadingOptions:s,errorOptions:o,parseSystemError:a}=t,c=!i;return new Proxy({},{get:(l,r)=>function({fn:g,interceptorName:u,getCallbackArgs:p}={}){return function(...y){return C(this,null,function*(){let b=p?p({params:y}):{},f,d;try{return yield U(N(u,"invoke"),O({},b)),f=yield g(...y),yield U(N(u,"success"),B(O({},b),{result:f})),f}catch(m){throw d=m,yield U(N(u,"fail"),B(O({},b),{error:d})),d}finally{yield U(N(u,"complete"),d?B(O({},b),{error:d}):B(O({},b),{result:f}))}})}}({fn:function g(...u){return C(this,null,function*(){let p;c&&uni.showLoading({title:s.title,mask:s.mask});let y={name:e,type:Ci,data:{method:r,params:u}};typeof t.secretMethods=="object"&&function(w,I){let A=I.data.method,x=w.secretMethods||{},L=x[A]||x["*"];L&&(I.secretType=L)}(t,y);let b=!1;try{p=yield n.callFunction(y)}catch(w){b=!0,p={result:new P(w)}}let{errSubject:f,errCode:d,errMsg:m,newToken:_}=p.result||{};if(c&&uni.hideLoading(),_&&_.token&&_.tokenExpired&&(bn(_),F(Ne,O({},_))),d){let w=m;if(b&&a&&(w=(yield a({objectName:e,methodName:r,params:u,errSubject:f,errCode:d,errMsg:m})).errMsg||m),c)if(o.type==="toast")uni.showToast({title:w,icon:"none"});else{if(o.type!=="modal")throw new Error(`Invalid errorOptions.type: ${o.type}`);{let{confirm:A}=yield function(){return C(this,arguments,function*({title:x,content:L,showCancel:E,cancelText:j,confirmText:Z}={}){return new Promise((V,re)=>{uni.showModal({title:x,content:L,showCancel:E,cancelText:j,confirmText:Z,success(ee){V(ee)},fail(){V({confirm:!1,cancel:!0})}})})})}({title:"\u63D0\u793A",content:w,showCancel:o.retry,cancelText:"\u53D6\u6D88",confirmText:o.retry?"\u91CD\u8BD5":"\u786E\u5B9A"});if(o.retry&&A)return g(...u)}}let I=new P({subject:f,code:d,message:m,requestId:p.requestId});throw I.detail=p.result,F(z,{type:qt,content:I}),I}return F(z,{type:qt,content:p.result}),p.result})},interceptorName:"callObject",getCallbackArgs:function({params:g}={}){return{objectName:e,methodName:r,params:g}}})})}}function Kn(n){return ne("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",n.config.spaceId))}function Us(){return C(this,arguments,function*({openid:n,callLoginByWeixin:e=!1}={}){throw Kn(this),new Error(`[SecureNetwork] API \`initSecureNetworkByWeixin\` is not supported on platform \`${mn}\``)})}function Ns(n){return C(this,null,function*(){let e=Kn(this);return e.initPromise||(e.initPromise=Us.call(this,n)),e.initPromise})}function Ms(n){return function({openid:e,callLoginByWeixin:t=!1}={}){return Ns.call(n,{openid:e,callLoginByWeixin:t})}}function on(n){let e={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(t){return new Promise((i,s)=>{e[n](B(O({},t),{success(o){i(o)},fail(o){s(o)}}))})}}var _t=class extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');let i=this._callback[e];if(!i)return;let s=function(o,a){for(let c=o.length-1;c>=0;c--)if(o[c]===a)return c;return-1}(i,t);i.splice(s,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){let i=this._callback[e];if(i)for(let s=0;s<i.length;s++)i[s](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([on("getSystemInfo")(),on("getPushClientId")()]).then(([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()},e=>{throw this.emit("error",e),this.close(),e})}open(){return C(this,null,function*(){return this.init()})}_isUniCloudSSE(e){if(e.type!=="receive")return!1;let t=e&&e.data&&e.data.payload;return!(!t||t.channel!=="UNI_CLOUD_SSE"||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;let t=e&&e.data&&e.data.payload,{action:i,messageId:s,message:o}=t;this._payloadQueue.push({action:i,messageId:s,message:o}),this._consumMessage()}_consumMessage(){for(;;){let e=this._payloadQueue.find(t=>t.messageId===this._currentMessageId+1);if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){let{action:t,messageId:i,message:s}=e;t==="end"?this._end({messageId:i,message:s}):t==="message"&&this._appendMessage({messageId:i,message:s})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}};function Fs(n){n._initPromiseHub||(n._initPromiseHub=new Ue({createPromise:function(){let e=Promise.resolve();var t;t=1,e=new Promise(s=>{setTimeout(()=>{s()},t)});let i=n.auth();return e.then(()=>i.getLoginState()).then(s=>s?Promise.resolve():i.signInAnonymously())}}))}var qs={tcb:Vt,tencent:Vt,aliyun:Ki,private:as},K=new class{init(n){let e={},t=qs[n.provider];if(!t)throw new Error("\u672A\u63D0\u4F9B\u6B63\u786E\u7684provider\u53C2\u6570");return e=t.init(n),Fs(e),ps(e),function(i){let s=i.uploadFile;i.uploadFile=function(o){return s.call(this,o)}}(e),function(i){i.database=function(s){if(s&&Object.keys(s).length>0)return i.init(s).database();if(this._database)return this._database;let o=en($e,{uniClient:i});return this._database=o,o},i.databaseForJQL=function(s){if(s&&Object.keys(s).length>0)return i.init(s).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;let o=en($e,{uniClient:i,isJQL:!0});return this._databaseForJQL=o,o}}(e),function(i){i.getCurrentUserInfo=Ls,i.chooseAndUploadFile=Es.initChooseAndUploadFile(i),Object.assign(i,{get mixinDatacom(){return Bn(i)}}),i.SSEChannel=_t,i.initSecureNetworkByWeixin=Ms(i),i.importObject=Ds(i)}(e),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach(i=>{if(!e[i])return;let s=e[i];e[i]=function(){return s.apply(e,Array.from(arguments))},e[i]=function(o,a){return function(c){let l=!1;a==="callFunction"&&(l=(c&&c.type||Dt)!==Dt);let r=a==="callFunction"&&!l,g=this._initPromiseHub.exec();c=c||{};let{success:u,fail:p,complete:y}=yn(c),b=g.then(()=>l?Promise.resolve():U(N(a,"invoke"),c)).then(()=>o.call(this,c)).then(f=>l?Promise.resolve(f):U(N(a,"success"),f).then(()=>U(N(a,"complete"),f)).then(()=>(r&&F(z,{type:Ce,content:f}),Promise.resolve(f))),f=>l?Promise.reject(f):U(N(a,"fail"),f).then(()=>U(N(a,"complete"),f)).then(()=>(F(z,{type:Ce,content:f}),Promise.reject(f))));if(!(u||p||y))return b;b.then(f=>{u&&u(f),y&&y(f),r&&F(z,{type:Ce,content:f})},f=>{p&&p(f),y&&y(f),r&&F(z,{type:Ce,content:f})})}}(e[i],i).bind(e)}),e.init=this.init,e}};(()=>{let n=Ni,e={};if(n&&n.length===1)e=n[0],K=K.init(e),K._isDefault=!0;else{let t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"],i;i=n&&n.length>0?"\u5E94\u7528\u6709\u591A\u4E2A\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u901A\u8FC7uniCloud.init\u65B9\u6CD5\u6307\u5B9A\u8981\u4F7F\u7528\u7684\u670D\u52A1\u7A7A\u95F4":"\u5E94\u7528\u672A\u5173\u8054\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u5728uniCloud\u76EE\u5F55\u53F3\u952E\u5173\u8054\u670D\u52A1\u7A7A\u95F4",t.forEach(s=>{K[s]=function(){return console.error(i),Promise.reject(new P({code:"SYS_ERR",message:i}))}})}Object.assign(K,{get mixinDatacom(){return Bn(K)}}),Ps(K),K.addInterceptor=pn,K.removeInterceptor=Fi,K.interceptObject=qi})();var de=K,js={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},Bs="/assets/uniicons.89ed7d6d.ttf",Ks={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},ae=(n,e)=>{let t=n.__vccOpts||n;for(let[i,s]of e)t[i]=s;return t},$s=n=>typeof n=="number"||/^[0-9]*$/g.test(n)?n+"px":n,zs=weex.requireModule("dom");zs.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+Bs+"')"});var Ws={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:js.glyphs}},computed:{unicode(){let n=this.icons.find(e=>e.font_class===this.type);return n?unescape(`%u${n.unicode}`):""},iconSize(){return $s(this.size)}},methods:{_onClick(){this.$emit("click")}}};function Hs(n,e,t,i,s,o){return(0,h.openBlock)(),(0,h.createElementBlock)("u-text",{style:(0,h.normalizeStyle)({color:t.color,"font-size":o.iconSize}),class:"uni-icons",onClick:e[0]||(e[0]=(...a)=>o._onClick&&o._onClick(...a))},(0,h.toDisplayString)(o.unicode),5)}var Js=ae(Ws,[["render",Hs],["styles",[Ks]]]),Vs={"uni-badge--x":{"":{position:"relative"}},"uni-badge--absolute":{"":{position:"absolute"}},"uni-badge--small":{"":{transform:"scale(0.8)",transformOrigin:"center center"}},"uni-badge":{"":{justifyContent:"center",flexDirection:"row",height:20,paddingTop:0,paddingRight:4,paddingBottom:0,paddingLeft:4,lineHeight:18,color:"#ffffff",borderRadius:100,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderStyle:"solid",borderColor:"#ffffff",textAlign:"center",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:12}},"uni-badge--info":{"":{color:"#ffffff",backgroundColor:"#909399"}},"uni-badge--primary":{"":{backgroundColor:"#2979ff"}},"uni-badge--success":{"":{backgroundColor:"#4cd964"}},"uni-badge--warning":{"":{backgroundColor:"#f0ad4e"}},"uni-badge--error":{"":{backgroundColor:"#dd524d"}},"uni-badge--inverted":{"":{paddingTop:0,paddingRight:5,paddingBottom:0,paddingLeft:0,color:"#909399"}},"uni-badge--info-inverted":{"":{color:"#909399",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--primary-inverted":{"":{color:"#2979ff",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--success-inverted":{"":{color:"#4cd964",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--warning-inverted":{"":{color:"#f0ad4e",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--error-inverted":{"":{color:"#dd524d",backgroundColor:"rgba(0,0,0,0)"}}},Qs={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default(){return{}}}},data(){return{}},computed:{width(){return String(this.text).length*8+12},classNames(){let{inverted:n,type:e,size:t,absolute:i}=this;return[n?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+t,i?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let n=this.width/2,e=10;this.isDot&&(n=5,e=5);let t=`${-n+this.offset[0]}px`,i=`${-e+this.offset[1]}px`,s={rightTop:{right:t,top:i},rightBottom:{right:t,bottom:i},leftBottom:{left:t,bottom:i},leftTop:{left:t,top:i}},o=s[this.absolute];return o||s.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){let{isDot:n,text:e,maxNum:t}=this;return n?"":Number(e)>t?`${t}+`:e}},methods:{onClick(){this.$emit("click")}}};function Ys(n,e,t,i,s,o){return(0,h.openBlock)(),(0,h.createElementBlock)("view",{class:"uni-badge--x",renderWhole:!0},[(0,h.renderSlot)(n.$slots,"default"),t.text?((0,h.openBlock)(),(0,h.createElementBlock)("u-text",{key:0,class:(0,h.normalizeClass)([o.classNames,"uni-badge"]),style:(0,h.normalizeStyle)([o.positionStyle,t.customStyle,o.dotStyle]),onClick:e[0]||(e[0]=a=>o.onClick())},(0,h.toDisplayString)(o.displayValue),7)):(0,h.createCommentVNode)("",!0)])}var Gs=ae(Qs,[["render",Ys],["styles",[Vs]]]),Xs={"uni-list-item":{"":{fontSize:16,position:"relative",justifyContent:"space-between",alignItems:"center",backgroundColor:"#ffffff",flexDirection:"row"}},"uni-list-item--disabled":{"":{opacity:.3}},"uni-list-item--hover":{"":{"!backgroundColor":"#f1f1f1"}},"uni-list-item__container":{"":{position:"relative",flexDirection:"row",paddingTop:12,paddingRight:15,paddingBottom:12,paddingLeft:15,flex:1,overflow:"hidden"}},"container--right":{"":{paddingRight:0}},"uni-list--border":{"":{position:"absolute",top:0,right:0,left:0,borderTopColor:"#e5e5e5",borderTopStyle:"solid",borderTopWidth:.5}},"uni-list-item__content":{"":{paddingRight:8,flex:1,color:"#3b4144",flexDirection:"column",justifyContent:"space-between",overflow:"hidden"}},"uni-list-item__content--center":{"":{justifyContent:"center"}},"uni-list-item__content-title":{"":{fontSize:14,color:"#3b4144",overflow:"hidden"}},"uni-list-item__content-note":{"":{marginTop:"6rpx",color:"#999999",fontSize:12,overflow:"hidden"}},"uni-list-item__extra":{"":{flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},"uni-list-item__header":{"":{flexDirection:"row",alignItems:"center"}},"uni-list-item__icon":{"":{marginRight:"18rpx",flexDirection:"row",justifyContent:"center",alignItems:"center"}},"uni-list-item__icon-img":{"":{height:26,width:26,marginRight:10}},"uni-icon-wrapper":{"":{alignItems:"center",paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10}},"flex--direction":{"":{flexDirection:"column"}},"uni-list--lg":{"":{height:40,width:40}},"uni-list--base":{"":{height:26,width:26}},"uni-list--sm":{"":{height:20,width:20}},"uni-list-item__extra-text":{"":{color:"#999999",fontSize:12}},"uni-ellipsis-1":{"":{lines:1,textOverflow:"ellipsis"}},"uni-ellipsis-2":{"":{lines:2,textOverflow:"ellipsis"}}},Zs={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default(){return{}}},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default(){return{type:"",color:"#000000",size:20,customPrefix:""}}},border:{type:Boolean,default:!0},customStyle:{type:Object,default(){return{padding:"",backgroundColor:"#FFFFFF"}}},keepScrollPosition:{type:Boolean,default:!1}},watch:{"customStyle.padding":{handler(n){typeof n=="number"&&(n+="");let e=n.split(" ");if(e.length===1){let t=e[0];this.padding={top:t,right:t,bottom:t,left:t}}else if(e.length===2){let[t,i]=e;this.padding={top:t,right:i,bottom:t,left:i}}else if(e.length===4){let[t,i,s,o]=e;this.padding={top:t,right:i,bottom:s,left:o}}},immediate:!0}},data(){return{isFirstChild:!1,padding:{top:"",right:"",bottom:"",left:""}}},mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(n="uniList"){let e=this.$parent,t=e.$options.name;for(;t!==n;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e},onClick(){if(this.to!==""){this.openPage();return}(this.clickable||this.link)&&this.$emit("click",{data:{}})},onSwitchChange(n){this.$emit("switchChange",n.detail)},openPage(){["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)!==-1?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(n){let e={url:this.to,success:t=>{this.$emit("click",{data:t})},fail:t=>{this.$emit("click",{data:t})}};switch(n){case"navigateTo":uni.navigateTo(e);break;case"redirectTo":uni.redirectTo(e);break;case"reLaunch":uni.reLaunch(e);break;case"switchTab":uni.switchTab(e);break;default:uni.navigateTo(e)}}}};function eo(n,e,t,i,s,o){let a=ue((0,h.resolveDynamicComponent)("uni-icons"),Js),c=ue((0,h.resolveDynamicComponent)("uni-badge"),Gs),l=(0,h.resolveComponent)("switch");return(0,h.openBlock)(),(0,h.createElementBlock)("cell",{keepScrollPosition:t.keepScrollPosition},[(0,h.createElementVNode)("view",{class:(0,h.normalizeClass)([{"uni-list-item--disabled":t.disabled},"uni-list-item"]),style:(0,h.normalizeStyle)({"background-color":t.customStyle.backgroundColor}),hoverClass:!t.clickable&&!t.link||t.disabled||t.showSwitch?"":"uni-list-item--hover",onClick:e[0]||(e[0]=(...r)=>o.onClick&&o.onClick(...r))},[s.isFirstChild?(0,h.createCommentVNode)("",!0):((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:0,class:(0,h.normalizeClass)(["border--left",{"uni-list--border":t.border}])},null,2)),(0,h.createElementVNode)("view",{class:(0,h.normalizeClass)(["uni-list-item__container",{"container--right":t.showArrow||t.link,"flex--direction":t.direction==="column"}]),style:(0,h.normalizeStyle)({paddingTop:s.padding.top,paddingLeft:s.padding.left,paddingRight:s.padding.right,paddingBottom:s.padding.bottom})},[(0,h.renderSlot)(n.$slots,"header",{},()=>[(0,h.createElementVNode)("view",{class:"uni-list-item__header"},[t.thumb?((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:0,class:"uni-list-item__icon"},[(0,h.createElementVNode)("u-image",{src:t.thumb,class:(0,h.normalizeClass)(["uni-list-item__icon-img",["uni-list--"+t.thumbSize]])},null,10,["src"])])):t.showExtraIcon?((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:1,class:"uni-list-item__icon"},[(0,h.createVNode)(a,{customPrefix:t.extraIcon.customPrefix,color:t.extraIcon.color,size:t.extraIcon.size,type:t.extraIcon.type},null,8,["customPrefix","color","size","type"])])):(0,h.createCommentVNode)("",!0)])]),(0,h.renderSlot)(n.$slots,"body",{},()=>[(0,h.createElementVNode)("view",{class:(0,h.normalizeClass)(["uni-list-item__content",{"uni-list-item__content--center":t.thumb||t.showExtraIcon||t.showBadge||t.showSwitch}])},[t.title?((0,h.openBlock)(),(0,h.createElementBlock)("u-text",{key:0,class:(0,h.normalizeClass)(["uni-list-item__content-title",[t.ellipsis!==0&&t.ellipsis<=2?"uni-ellipsis-"+t.ellipsis:""]])},(0,h.toDisplayString)(t.title),3)):(0,h.createCommentVNode)("",!0),t.note?((0,h.openBlock)(),(0,h.createElementBlock)("u-text",{key:1,class:"uni-list-item__content-note"},(0,h.toDisplayString)(t.note),1)):(0,h.createCommentVNode)("",!0)],2)]),(0,h.renderSlot)(n.$slots,"footer",{},()=>[t.rightText||t.showBadge||t.showSwitch?((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:0,class:(0,h.normalizeClass)(["uni-list-item__extra",{"flex--justify":t.direction==="column"}])},[t.rightText?((0,h.openBlock)(),(0,h.createElementBlock)("u-text",{key:0,class:"uni-list-item__extra-text"},(0,h.toDisplayString)(t.rightText),1)):(0,h.createCommentVNode)("",!0),t.showBadge?((0,h.openBlock)(),(0,h.createBlock)(c,{key:1,type:t.badgeType,text:t.badgeText,"custom-style":t.badgeStyle},null,8,["type","text","custom-style"])):(0,h.createCommentVNode)("",!0),t.showSwitch?((0,h.openBlock)(),(0,h.createBlock)(l,{key:2,disabled:t.disabled,checked:t.switchChecked,onChange:o.onSwitchChange},null,8,["disabled","checked","onChange"])):(0,h.createCommentVNode)("",!0)],2)):(0,h.createCommentVNode)("",!0)])],6),t.showArrow||t.link?((0,h.openBlock)(),(0,h.createBlock)(a,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):(0,h.createCommentVNode)("",!0)],14,["hoverClass"])],8,["keepScrollPosition"])}var to=ae(Zs,[["render",eo],["styles",[Xs]]]),no={"uni-list":{"":{backgroundColor:"#ffffff",position:"relative",flexDirection:"column"}},"uni-list--border":{"":{position:"relative",borderTopColor:"#e5e5e5",borderTopStyle:"solid",borderTopWidth:.5,borderBottomColor:"#e5e5e5",borderBottomStyle:"solid",borderBottomWidth:.5,zIndex:-1}}},io={name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{stackFromEnd:{type:Boolean,default:!1},enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0},renderReverse:{type:Boolean,default:!1}},created(){this.firstChildAppend=!1},methods:{loadMore(n){this.$emit("scrolltolower")},scroll(n){this.$emit("scroll",n)}}};function so(n,e,t,i,s,o){return(0,h.openBlock)(),(0,h.createElementBlock)("list",{bounce:!1,scrollable:!0,showScrollbar:"",renderReverse:t.renderReverse,onScroll:e[0]||(e[0]=(...a)=>o.scroll&&o.scroll(...a)),class:(0,h.normalizeClass)(["uni-list",{"uni-list--border":t.border}]),enableBackToTop:t.enableBackToTop,loadmoreoffset:"15"},[(0,h.renderSlot)(n.$slots,"default")],42,["renderReverse","enableBackToTop"])}var oo=ae(io,[["render",so],["styles",[no]]]),ao={"uniCloud.component.add.success":"Success","uniCloud.component.update.success":"Success","uniCloud.component.remove.showModal.title":"Tips","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},ro={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},co={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},lo={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},uo={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u522A\u9664\u6578\u64DA"},ho={en:ao,es:ro,fr:co,"zh-Hans":lo,"zh-Hant":uo},it=Array.isArray,{t:Ee}=ln(ho),an={load:"load",error:"error"},Re={add:"add",replace:"replace"},st={auto:"auto",onready:"onready",manual:"manual"},fo=["pageCurrent","pageSize","collection","action","field","getcount","orderby","where","groupby","groupField","distinct"],mo={name:"UniClouddb",setup(n){let e=n.ssrKey?n.getone?Lt(void 0,n.ssrKey):Ct([],n.ssrKey):n.getone?Lt(void 0,"n5CSWvLk5Y153iXLhXxKuw=="):Ct([],"gcfw5H9OcmgxY4Hykzu+qQ=="),t=(0,h.getCurrentInstance)();return(0,h.onMounted)(()=>{(!e.value||e.value.length===0)&&!n.manual&&n.loadtime===st.auto&&t.proxy.loadData()}),{dataList:e}},serverPrefetch(){return C(this,null,function*(){if(!this.manual&&this.loadtime===st.auto)return this.loadData()})},props:{options:{type:[Object,Array],default(){return{}}},spaceInfo:{type:Object,default(){return{}}},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String,Object],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},pageIndistinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1},ssrKey:{type:[String,Number],default:""}},data(){return{loading:!1,hasMore:!1,paginationInternal:{},errorMessage:""}},computed:{collectionArgs(){return it(this.collection)?this.collection:[this.collection]},isLookup(){return it(this.collection)&&this.collection.length>1||typeof this.collection=="string"&&this.collection.indexOf(",")>-1},mainCollection(){return typeof this.collection=="string"?this.collection.split(",")[0]:JSON.parse(JSON.stringify(this.collection[0])).$db[0].$param[0]}},created(){this._isEnded=!1,this.paginationInternal={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var n=[];return fo.forEach(e=>{n.push(this[e])}),n},(n,e)=>{if(this.paginationInternal.size=this.pageSize,n[0]!==e[0]&&(this.paginationInternal.current=this.pageCurrent),this.loadtime===st.manual)return;let t=!1;for(let i=2;i<n.length;i++)if(n[i]!==e[i]){t=!0;break}t&&(this.clear(),this.reset()),this._execLoadData()})},methods:{loadData(n,e){let t=null,i=!1;return typeof n=="object"?(n.clear&&(this.pageData===Re.replace?this.clear():i=n.clear,this.reset()),n.current!==void 0&&(this.paginationInternal.current=n.current),typeof e=="function"&&(t=e)):typeof n=="function"&&(t=n),this._execLoadData(t,i)},loadMore(){this._isEnded||this.loading||(this.pageData===Re.add&&this.paginationInternal.current++,this._execLoadData())},refresh(){this.clear(),this._execLoadData()},clear(){this._isEnded=!1,this.dataList=[]},reset(){this.paginationInternal.current=1},add(n,{action:e,showToast:t=!0,toastTitle:i,success:s,fail:o,complete:a,needConfirm:c=!0,needLoading:l=!0,loadingTitle:r=""}={}){l&&uni.showLoading({title:r});let g=de.database(this.spaceInfo);e&&(g=g.action(e)),g.collection(this.mainCollection).add(n).then(u=>{s&&s(u),t&&uni.showToast({title:i||Ee("uniCloud.component.add.success")})}).catch(u=>{o&&o(u),c&&uni.showModal({content:u.message,showCancel:!1})}).finally(()=>{l&&uni.hideLoading(),a&&a()})},remove(n,{action:e,success:t,fail:i,complete:s,confirmTitle:o,confirmContent:a,needConfirm:c=!0,needLoading:l=!0,loadingTitle:r=""}={}){if(!(!n||!n.length)){if(!c){this._execRemove(n,e,t,i,s,c,l,r);return}uni.showModal({title:o||Ee("uniCloud.component.remove.showModal.title"),content:a||Ee("uniCloud.component.remove.showModal.content"),showCancel:!0,success:g=>{g.confirm&&this._execRemove(n,e,t,i,s,c,l,r)}})}},update(n,e,{action:t,showToast:i=!0,toastTitle:s,success:o,fail:a,complete:c,needConfirm:l=!0,needLoading:r=!0,loadingTitle:g=""}={}){r&&uni.showLoading({title:g});let u=de.database(this.spaceInfo);return t&&(u=u.action(t)),u.collection(this.mainCollection).doc(n).update(e).then(p=>{o&&o(p),i&&uni.showToast({title:s||Ee("uniCloud.component.update.success")})}).catch(p=>{a&&a(p),l&&uni.showModal({content:p.message,showCancel:!1})}).finally(()=>{r&&uni.hideLoading(),c&&c()})},getTemp(n=!0){let e=de.database(this.spaceInfo);this.action&&(e=e.action(this.action)),e=e.collection(...this.collectionArgs),this.foreignKey&&(e=e.foreignKey(this.foreignKey)),!this.where||!Object.keys(this.where).length||(e=e.where(this.where)),this.field&&(e=e.field(this.field)),this.groupby&&(e=e.groupBy(this.groupby)),this.groupField&&(e=e.groupField(this.groupField)),this.distinct===!0&&(e=e.distinct()),this.orderby&&(e=e.orderBy(this.orderby));let{current:t,size:i}=this.paginationInternal,s={};this.getcount&&(s.getCount=this.getcount);let o={limitLevel:this.limitlevel,startWith:this.startwith};return this.gettree&&(s.getTree=o),this.gettreepath&&(s.getTreePath=o),e=e.skip(i*(t-1)).limit(i),n?(e=e.getTemp(s),e.udb=this):e=e.get(s),e},setResult(n){n.code===0?this._execLoadDataSuccess(n):this._execLoadDataFail(new Error(n.message))},_execLoadData(n,e){if(!this.loading)return this.loading=!0,this.errorMessage="",this._getExec().then(t=>{this.loading=!1,this._execLoadDataSuccess(t.result,n,e)}).catch(t=>{this.loading=!1,this._execLoadDataFail(t,n)})},_execLoadDataSuccess(n,e,t){let{data:i,count:s}=n;this._isEnded=s!==void 0?this.paginationInternal.current*this.paginationInternal.size>=s:i.length<this.pageSize,this.hasMore=!this._isEnded;let o=this.getone?i.length?i[0]:void 0:i;this.getcount&&(this.paginationInternal.count=s),e&&e(o,this._isEnded,this.paginationInternal),this._dispatchEvent(an.load,o),this.getone||this.pageData===Re.replace?this.dataList=o:t?this.dataList=o:this.dataList.push(...o)},_execLoadDataFail(n,e){this.errorMessage=n,e&&e(),this.$emit(an.error,n)},_getExec(){return this.getTemp(!1)},_execRemove(n,e,t,i,s,o,a,c){if(!this.collection||!n)return;let l=it(n)?n:[n];if(!l.length)return;a&&uni.showLoading({mask:!0,title:c});let r=de.database(this.spaceInfo),g=r.command,u=r;e&&(u=u.action(e)),u.collection(this.mainCollection).where({_id:g.in(l)}).remove().then(p=>{t&&t(p.result),this.pageData===Re.replace?this.refresh():this.removeData(l)}).catch(p=>{i&&i(p),o&&uni.showModal({content:p.message,showCancel:!1})}).finally(()=>{a&&uni.hideLoading(),s&&s()})},removeData(n){let e=n.slice(0),t=this.dataList;for(let i=t.length-1;i>=0;i--){let s=e.indexOf(t[i]._id);s>=0&&(t.splice(i,1),e.splice(s,1))}},_dispatchEvent(n,e){this._changeDataFunction?this._changeDataFunction(e,this._isEnded,this.paginationInternal):this.$emit(n,e,this._isEnded,this.paginationInternal)}}};function go(n,e,t,i,s,o){return(0,h.openBlock)(),(0,h.createElementBlock)("view",{renderWhole:!0},[(0,h.renderSlot)(n.$slots,"default",{options:t.options,data:i.dataList,pagination:s.paginationInternal,loading:s.loading,hasMore:s.hasMore,error:s.errorMessage})])}var po=ae(mo,[["render",go]]),_o={"m-auto":{"":{marginTop:50,marginBottom:50,textAlign:"center"}},"s-25":{"":{fontSize:25}}};de.database();var yo={data(){return{name:"",time:null}},computed:{where(){if(this.name)return{name:this.name}}},onNavigationBarSearchInputChanged(n){clearTimeout(this.time),this.time=setTimeout(()=>{this.name=n.text},500)},onLoad(){uni.reLaunch({url:"/pages/list/list"})},methods:{loadData(){}}};function wo(n,e,t,i,s,o){let a=ue((0,h.resolveDynamicComponent)("uni-list-item"),to),c=ue((0,h.resolveDynamicComponent)("uni-list"),oo),l=ue((0,h.resolveDynamicComponent)("unicloud-db"),po);return(0,h.openBlock)(),(0,h.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!1,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,h.createElementVNode)("view",{class:"list"},[(0,h.createVNode)(l,{ref:"udb",collection:"game-list",where:o.where},{default:(0,h.withCtx)(({data:r,loading:g,error:u,options:p})=>[u?((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:0,class:"s-25 m-auto"},[(0,h.createElementVNode)("u-text",null,(0,h.toDisplayString)(u.message),1)])):g?((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:1,ref:"loading",class:"loading"},null,512)):((0,h.openBlock)(),(0,h.createElementBlock)("view",{key:2},[(0,h.createVNode)(c,null,{default:(0,h.withCtx)(()=>[((0,h.openBlock)(!0),(0,h.createElementBlock)(h.Fragment,null,(0,h.renderList)(r,(y,b)=>((0,h.openBlock)(),(0,h.createBlock)(a,{class:"item",key:b,title:y.name,link:"",to:y.to},null,8,["title","to"]))),128))]),_:2},1024)]))]),_:1},8,["where"])])])}var We=ae(yo,[["render",wo],["styles",[_o]]]);var St=plus.webview.currentWebview();if(St){let n=parseInt(St.id),e="pages/list/list",t={};try{t=JSON.parse(St.__query__)}catch(s){}We.mpType="page";let i=Vue.createPageApp(We,{$store:getApp({allowDefault:!0}).$store,__pageId:n,__pagePath:e,__pageQuery:t});i.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...We.styles||[]])),i.mount("#root")}})();
